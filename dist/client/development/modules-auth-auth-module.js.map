{"version":3,"sources":["./app/modules/auth/auth-routing.module.ts","./app/modules/auth/auth.module.ts","./app/modules/auth/components/pages/auth-index/auth-index.component.ts","./app/modules/auth/components/pages/auth-index/auth-index.component.html","./app/modules/auth/components/pages/auth-signin/auth-signin.component.ts","./app/modules/auth/components/pages/auth-signin/auth-signin.component.html","./app/modules/auth/components/pages/auth-signout/auth-signout.component.ts","./app/modules/auth/components/pages/auth-signout/auth-signout.component.html"],"names":[],"mappings":"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","file":"modules-auth-auth-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AuthGuardService } from '../../canActivates';\nimport { AuthIndexComponent } from './components/pages/auth-index/auth-index.component';\nimport { AuthSigninComponent } from './components/pages/auth-signin/auth-signin.component';\nimport { AuthSignoutComponent } from './components/pages/auth-signout/auth-signout.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    children: [\n      { path: '', component: AuthIndexComponent },\n      { path: 'signin', canActivate: [AuthGuardService], component: AuthSigninComponent },\n      { path: 'signout', component: AuthSignoutComponent }\n    ]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AuthRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { AuthRoutingModule } from './auth-routing.module';\nimport { AuthIndexComponent } from './components/pages/auth-index/auth-index.component';\nimport { AuthSigninComponent } from './components/pages/auth-signin/auth-signin.component';\nimport { AuthSignoutComponent } from './components/pages/auth-signout/auth-signout.component';\n\n\n@NgModule({\n  declarations: [\n    AuthIndexComponent,\n    AuthSigninComponent,\n    AuthSignoutComponent\n  ],\n  imports: [\n    CommonModule,\n    AuthRoutingModule,\n    SharedModule,\n  ]\n})\nexport class AuthModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { getEnvironment } from '../../../../../../environments/environment';\nimport { CinerinoService } from '../../../../../services/cinerino.service';\n\n@Component({\n    selector: 'app-auth-index',\n    templateUrl: './auth-index.component.html',\n    styleUrls: ['./auth-index.component.scss']\n})\nexport class AuthIndexComponent implements OnInit {\n    public environment = getEnvironment();\n\n    constructor(\n        private cinerino: CinerinoService,\n        private router: Router\n    ) { }\n\n    public async ngOnInit() {\n        try {\n            await this.cinerino.getServices();\n            this.router.navigate([this.environment.BASE_URL]);\n        } catch (error) {\n            await this.cinerino.signIn();\n        }\n    }\n\n}\n","<app-loading [isLoading]=\"true\" process=\"process.authAction.CheckLogin\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { select, Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { CinerinoService, MasterService, UtilService } from '../../../../../services';\nimport * as reducers from '../../../../../store/reducers';\n\n@Component({\n    selector: 'app-auth-signin',\n    templateUrl: './auth-signin.component.html',\n    styleUrls: ['./auth-signin.component.scss']\n})\nexport class AuthSigninComponent implements OnInit {\n    public isLoading: Observable<boolean>;\n    public master: Observable<reducers.IMasterState>;\n    public projects: {\n        projectId: string;\n        projectName: string;\n        storageUrl: string;\n    }[];\n\n    constructor(\n        private store: Store<reducers.IState>,\n        private masterService: MasterService,\n        private utilService: UtilService,\n        private cinerinoService: CinerinoService\n    ) { }\n\n    public async ngOnInit() {\n        this.isLoading = this.store.pipe(select(reducers.getLoading));\n        this.master = this.store.pipe(select(reducers.getMaster));\n        this.projects = [];\n        await this.masterService.getProjects();\n        this.utilService.loadStart({ process: 'load' });\n        const masterData = await this.masterService.getData();\n        const projects = masterData.projects;\n        if (projects.length === 1) {\n            // プロジェクトが一つの場合自動遷移\n            location.href = `/?projectId=${projects[0].id}`;\n            return;\n        }\n        this.utilService.loadEnd();\n    }\n\n    public async signOut() {\n        try {\n            await this.cinerinoService.getServices();\n            await this.cinerinoService.signOut();\n        } catch (error) {\n            console.error(error);\n        }\n    }\n\n}\n","<app-header [isClear]=\"false\">\n</app-header>\n<div class=\"contents scroll-horizontal\">\n    <div class=\"p-3\" *ngIf=\"(master | async)?.projects.length > 0\">\n        <h2 class=\"text-large mb-4 text-center font-weight-bold\">プロジェクト選択</h2>\n        <p class=\"mb-4 text-md-center\">プロジェクトを選択してください。</p>\n        <div class=\"container px-0 mb-4\">\n            <ul class=\"row\">\n                <li *ngFor=\"let project of (master | async)?.projects\" class=\"col-3 mb-3\">\n                    <div class=\"card h-100\">\n                        <div class=\"card-body\">\n                            <div class=\"d-flex align-items-center mb-4\">\n                                <div class=\"mr-2\"><img [src]=\"project.logo\" class=\"logo\" [alt]=\"project.name\"></div>\n                                <p class=\"font-weight-bold text-overflow-ellipsis\">{{ project.name }}</p>\n                            </div>\n                            <a class=\"btn btn-primary btn-block py-3\" [href]=\"'/?projectId=' + project.id\">選択</a>\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n    </div>\n</div>\n<app-footer>\n    <div class=\"mr-auto\">\n        <button type=\"button\" class=\"btn btn-outline-primary\" (click)=\"signOut()\">戻る</button>\n    </div>\n</app-footer>\n\n\n<app-loading [isLoading]=\"isLoading | async\" process=\"process.masterAction.GetProjects\"></app-loading>","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ActionService } from '../../../../../services';\n\n@Component({\n    selector: 'app-auth-signout',\n    templateUrl: './auth-signout.component.html',\n    styleUrls: ['./auth-signout.component.scss']\n})\nexport class AuthSignoutComponent implements OnInit {\n\n    constructor(\n        private router: Router,\n        private actionService: ActionService,\n    ) { }\n\n    public ngOnInit() {\n        this.actionService.order.delete();\n        this.actionService.purchase.delete();\n        this.router.navigate(['/']);\n    }\n\n    public selectProject() {\n    }\n\n}\n","<app-loading [isLoading]=\"true\" process=\"process.authAction.Logout\"></app-loading>"],"sourceRoot":"webpack:///"}