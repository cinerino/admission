(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{AL2A:function(t,e,n){"use strict";n.r(e),n.d(e,"SettingModule",(function(){return Gt}));var o=n("2kYt"),r=n("DSWM"),i=n("sEIs"),c=n("RRjC"),a=n("sN6X"),s=n("MMGj"),l=n("x8Mb"),d=n("PIN6"),p=n("cHUu"),u=n("mOXJ"),f=n("oDol"),m=n("EM62"),h=n("s2Ay"),g=n("cc8N"),v=n("KLHf"),y=n("us+Q"),P=n("nIj0"),O=n("ddJ1"),w=n("wayk"),b=n("OSFB");function C(t,e){if(1&t&&(m.Pc(0,"p"),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t){const t=m.Yc(2).$implicit;m.wc(1),m.Bd(" ",m.ad(2,1,"form.label."+t)," ")}}function I(t,e){if(1&t&&(m.Pc(0,"p"),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t){const t=m.Yc(2).$implicit;m.wc(1),m.Bd(" ",m.ad(2,1,"setting.application."+t+".label")," ")}}function x(t,e){1&t&&(m.Pc(0,"p",11),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd("",m.ad(2,1,"form.required")," "))}function F(t,e){if(1&t&&(m.Pc(0,"option",15),m.zd(1),m.Zc(2,"changeLanguage"),m.Oc()),2&t){const t=e.$implicit;m.fd("value",t.id),m.wc(1),m.Bd(" ",m.ad(2,2,t.name),"")}}function S(t,e){if(1&t){const t=m.Qc();m.Pc(0,"select",12),m.Wc("change",(function(){m.rd(t);return m.Yc(3).changeTheater()})),m.Pc(1,"option",13),m.zd(2),m.Zc(3,"translate"),m.Oc(),m.xd(4,F,3,4,"option",14),m.Oc()}if(2&t){const t=m.Yc(2).$implicit,e=m.Yc();m.fd("formControlName",t),m.wc(2),m.Ad(m.ad(3,3,"setting.unselected")),m.wc(2),m.fd("ngForOf",e.theaters)}}function A(t,e){if(1&t&&(m.Pc(0,"option",15),m.zd(1),m.Oc()),2&t){const t=e.$implicit;m.fd("value",t.id),m.wc(1),m.Ad(t.name)}}function G(t,e){if(1&t&&(m.Pc(0,"select",16),m.Pc(1,"option",13),m.zd(2),m.Zc(3,"translate"),m.Oc(),m.xd(4,A,2,2,"option",14),m.Oc()),2&t){const t=m.Yc(2).$implicit,e=m.Yc();m.fd("formControlName",t),m.wc(2),m.Ad(m.ad(3,3,"setting.unselected")),m.wc(2),m.fd("ngForOf",e.posList)}}function N(t,e){if(1&t&&(m.Pc(0,"select",16),m.Pc(1,"option",15),m.zd(2),m.Zc(3,"translate"),m.Oc(),m.Pc(4,"option",15),m.zd(5),m.Zc(6,"translate"),m.Oc(),m.Oc()),2&t){const t=m.Yc(2).$implicit,e=m.Yc();m.fd("formControlName",t),m.wc(1),m.fd("value",e.applicationType.Tvm),m.wc(1),m.Bd(" ",m.ad(3,5,"setting.application.applicationType.option.tvm")," "),m.wc(2),m.fd("value",e.applicationType.Printer),m.wc(1),m.Bd(" ",m.ad(6,7,"setting.application.applicationType.option.printer")," ")}}function T(t,e){if(1&t){const t=m.Qc();m.Pc(0,"app-numeric-keypad",19),m.Wc("change",(function(e){m.rd(t);return m.Yc(4).formGroup.controls.applicationPassword.setValue(e)})),m.Kc(1,"input",20),m.Oc()}if(2&t){const t=m.Yc(3).$implicit,e=m.Yc();m.fd("inputValue",e.formGroup.controls.applicationPassword.value),m.wc(1),m.fd("formControlName",t)}}function k(t,e){if(1&t&&m.Kc(0,"input",21),2&t){const t=m.Yc(3).$implicit;m.fd("formControlName",t)}}function Y(t,e){if(1&t&&(m.Nc(0),m.xd(1,T,2,2,"app-numeric-keypad",17),m.xd(2,k,1,1,"input",18),m.Mc()),2&t){const t=m.Yc(3);m.wc(1),m.fd("ngIf",t.environment.INPUT_KEYPAD),m.wc(1),m.fd("ngIf",!t.environment.INPUT_KEYPAD)}}function E(t,e){if(1&t&&(m.Pc(0,"div",3),m.Pc(1,"div",4),m.Pc(2,"div",5),m.xd(3,C,3,3,"p",6),m.xd(4,I,3,3,"p",6),m.xd(5,x,3,3,"p",7),m.Oc(),m.Oc(),m.Pc(6,"div",8),m.xd(7,S,5,5,"select",9),m.xd(8,G,5,5,"select",10),m.xd(9,N,7,9,"select",10),m.xd(10,Y,3,2,"ng-container",6),m.Oc(),m.Oc()),2&t){const t=m.Yc().$implicit,e=m.Yc();m.wc(3),m.fd("ngIf",!("applicationType"===t||"applicationPassword"===t)),m.wc(1),m.fd("ngIf","applicationType"===t||"applicationPassword"===t),m.wc(1),m.fd("ngIf",e.isRequired(t)),m.wc(2),m.fd("ngIf","theaterId"===t),m.wc(1),m.fd("ngIf","posId"===t),m.wc(1),m.fd("ngIf","applicationType"===t),m.wc(1),m.fd("ngIf","applicationPassword"===t)}}function Z(t,e){if(1&t&&(m.Nc(0),m.xd(1,E,11,7,"div",2),m.Mc()),2&t){const t=e.$implicit,n=m.Yc();m.wc(1),m.fd("ngIf",!("posId"===t&&0===n.posList.length))}}class z{constructor(t){this.formBuilder=t,this.environment=Object(d.a)(),this.applicationType=l.b.Util.Application.ApplicationType,this.valueChanges=new m.w}ngOnInit(){this.posList=[],this.formGroup=this.createForm();const{theater:t,pos:e,applicationType:n,applicationPassword:o}=this.data;void 0!==t&&(this.formGroup.controls.theaterId.setValue(t.id),this.changeTheater()),void 0!==e&&this.formGroup.controls.posId.setValue(e.id),void 0!==n&&this.formGroup.controls.applicationType.setValue(n),void 0!==o&&this.formGroup.controls.applicationPassword.setValue(o),this.valueChanges.emit(this.formGroup),this.subscription=this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit(this.formGroup)})}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}createForm(){return this.formBuilder.group({theaterId:["",[P.q.required]],posId:[""],applicationType:[""],applicationPassword:[""]})}isRequired(t){return"theaterId"===t||void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.formGroup.controls)}getProfileProperty(t){return this.environment.PROFILE.find(e=>e.key===t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}changeTheater(){this.formGroup.controls.posId.setValue("");const t=this.formGroup.controls.theaterId.value,e=this.theaters.find(e=>e.id===t);this.posList=""!==t&&void 0!==e?void 0===e.hasPOS?[]:e.hasPOS:[]}}function L(t,e){if(1&t&&(m.Pc(0,"option",14),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t){const t=e.$implicit;m.fd("value",t.connectionType),m.wc(1),m.Bd(" ",m.ad(2,2,t.name),"")}}function D(t,e){if(1&t){const t=m.Qc();m.Pc(0,"button",15),m.Wc("click",(function(){m.rd(t);return m.Yc().print.emit()})),m.zd(1),m.Zc(2,"translate"),m.Oc()}2&t&&(m.wc(1),m.Ad(m.ad(2,1,"setting.device.printer.testPrinting")))}function B(t,e){1&t&&(m.Pc(0,"p",18),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd(" ",m.ad(2,1,"form.validation.required"),""))}function $(t,e){if(1&t&&(m.Pc(0,"div",16),m.xd(1,B,3,3,"p",17),m.Oc()),2&t){const t=m.Yc();m.wc(1),m.fd("ngIf",null==t.formGroup.controls.printerIpAddress.errors?null:t.formGroup.controls.printerIpAddress.errors.required)}}function q(t,e){1&t&&(m.Pc(0,"p",18),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd(" ",m.ad(2,1,"form.validation.required"),""))}function J(t,e){if(1&t&&(m.Pc(0,"div",16),m.xd(1,q,3,3,"p",17),m.Oc()),2&t){const t=m.Yc();m.wc(1),m.fd("ngIf",null==t.formGroup.controls.cashchanger.errors?null:t.formGroup.controls.cashchanger.errors.required)}}function R(t,e){1&t&&(m.Pc(0,"p",18),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd(" ",m.ad(2,1,"form.validation.required"),""))}function j(t,e){if(1&t&&(m.Pc(0,"div",16),m.xd(1,R,3,3,"p",17),m.Oc()),2&t){const t=m.Yc();m.wc(1),m.fd("ngIf",null==t.formGroup.controls.payment.errors?null:t.formGroup.controls.payment.errors.required)}}z.\u0275fac=function(t){return new(t||z)(m.Jc(P.b))},z.\u0275cmp=m.Dc({type:z,selectors:[["app-input-app"]],inputs:{data:"data",theaters:"theaters"},outputs:{valueChanges:"valueChanges"},decls:2,vars:2,consts:[[3,"formGroup"],[4,"ngFor","ngForOf"],["class","form-group row align-items-center",4,"ngIf"],[1,"form-group","row","align-items-center"],[1,"col-4","py-2","text-right"],[1,"d-inline-flex","align-items-center"],[4,"ngIf"],["class","badge badge-danger ml-2",4,"ngIf"],[1,"col-8"],["class","form-control",3,"formControlName","change",4,"ngIf"],["class","form-control",3,"formControlName",4,"ngIf"],[1,"badge","badge-danger","ml-2"],[1,"form-control",3,"formControlName","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control",3,"formControlName"],["inputType","string",3,"inputValue","change",4,"ngIf"],["type","password","class","form-control",3,"formControlName",4,"ngIf"],["inputType","string",3,"inputValue","change"],["type","password","readonly","",1,"form-control",3,"formControlName"],["type","password",1,"form-control",3,"formControlName"]],template:function(t,e){1&t&&(m.Pc(0,"form",0),m.xd(1,Z,2,1,"ng-container",1),m.Oc()),2&t&&(m.fd("formGroup",e.formGroup),m.wc(1),m.fd("ngForOf",e.getProfileFormKeys()))},directives:[P.s,P.l,P.e,o.k,o.l,P.p,P.k,P.d,O.b,P.n,P.r,w.a,P.a],pipes:[h.c,b.a],styles:[""]});class K{constructor(t,e){this.formBuilder=t,this.translate=e,this.environment=Object(d.a)(),this.connectionType=l.b.Util.Printer.ConnectionType,this.printers=l.b.Util.Printer.printers,this.valueChanges=new m.w,this.print=new m.w,this.payment=new m.w,this.cashchanger=new m.w}ngOnInit(){this.formGroup=this.createForm();const{printerType:t,printerIpAddress:e,cashchanger:n,payment:o}=this.data;void 0!==t&&(this.formGroup.controls.printerType.setValue(t),this.formGroup.controls.printerIpAddress.setValue(e)),void 0!==n&&this.formGroup.controls.cashchanger.setValue(n),void 0!==o&&this.formGroup.controls.payment.setValue(o),this.valueChanges.emit(this.formGroup),this.subscription=this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit(this.formGroup)})}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}createForm(){return this.formBuilder.group({printerType:[l.b.Util.Printer.ConnectionType.None],printerIpAddress:[""],cashchanger:[""],payment:[""]})}isRequired(t){return void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.formGroup.controls)}getProfileProperty(t){return this.environment.PROFILE.find(e=>e.key===t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}changePrinterType(){this.formGroup.controls.printerType.value===l.b.Util.Printer.ConnectionType.StarBluetooth&&this.formGroup.controls.printerIpAddress.setValue(this.translate.instant("setting.starBluetoothAddress"))}}K.\u0275fac=function(t){return new(t||K)(m.Jc(P.b),m.Jc(h.d))},K.\u0275cmp=m.Dc({type:K,selectors:[["app-input-device"]],inputs:{data:"data",isConnected:"isConnected"},outputs:{valueChanges:"valueChanges",print:"print",payment:"payment",cashchanger:"cashchanger"},decls:52,vars:48,consts:[[3,"formGroup"],[1,"form-group","row"],[1,"col-4","text-right","py-3"],[1,"col-8"],["formControlName","printerType",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","button","class","btn btn-sm btn-primary py-2 mt-2",3,"click",4,"ngIf"],["type","text","formControlName","printerIpAddress","placeholder","0.0.0.0",1,"form-control"],["class","mt-2",4,"ngIf"],[1,"text-small","mt-2",3,"innerHtml"],["type","text","formControlName","cashchanger","placeholder","0.0.0.0",1,"form-control"],["type","button",1,"btn","btn-primary","mt-2","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-primary","mt-2",3,"disabled","click"],["type","text","formControlName","payment","placeholder","0.0.0.0",1,"form-control"],[3,"value"],["type","button",1,"btn","btn-sm","btn-primary","py-2","mt-2",3,"click"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,e){1&t&&(m.Pc(0,"form",0),m.Pc(1,"div",1),m.Pc(2,"p",2),m.zd(3),m.Zc(4,"translate"),m.Oc(),m.Pc(5,"div",3),m.Pc(6,"select",4),m.Wc("change",(function(){return e.changePrinterType()})),m.xd(7,L,3,4,"option",5),m.Oc(),m.xd(8,D,3,3,"button",6),m.Oc(),m.Oc(),m.Pc(9,"div",1),m.Pc(10,"p",2),m.zd(11),m.Zc(12,"translate"),m.Oc(),m.Pc(13,"div",3),m.Kc(14,"input",7),m.xd(15,$,2,1,"div",8),m.Kc(16,"p",9),m.Zc(17,"translate"),m.Oc(),m.Oc(),m.Pc(18,"div",1),m.Pc(19,"p",2),m.zd(20),m.Zc(21,"translate"),m.Oc(),m.Pc(22,"div",3),m.Kc(23,"input",10),m.Kc(24,"p",9),m.Zc(25,"translate"),m.xd(26,J,2,1,"div",8),m.Pc(27,"button",11),m.Wc("click",(function(){return e.cashchanger.emit("connect")})),m.zd(28),m.Zc(29,"translate"),m.Oc(),m.Pc(30,"button",11),m.Wc("click",(function(){return e.cashchanger.emit("endDeposit")})),m.zd(31),m.Zc(32,"translate"),m.Oc(),m.Pc(33,"button",11),m.Wc("click",(function(){return e.cashchanger.emit("readCounts")})),m.zd(34),m.Zc(35,"translate"),m.Oc(),m.Pc(36,"button",11),m.Wc("click",(function(){return e.cashchanger.emit("collectAll")})),m.zd(37),m.Zc(38,"translate"),m.Oc(),m.Pc(39,"button",12),m.Wc("click",(function(){return e.cashchanger.emit("collectPart")})),m.zd(40),m.Zc(41,"translate"),m.Oc(),m.Oc(),m.Oc(),m.Pc(42,"div",1),m.Pc(43,"p",2),m.zd(44),m.Zc(45,"translate"),m.Oc(),m.Pc(46,"div",3),m.Kc(47,"input",13),m.xd(48,j,2,1,"div",8),m.Pc(49,"button",12),m.Wc("click",(function(){return e.payment.emit()})),m.zd(50),m.Zc(51,"translate"),m.Oc(),m.Oc(),m.Oc(),m.Oc()),2&t&&(m.fd("formGroup",e.formGroup),m.wc(3),m.Ad(m.ad(4,24,"setting.device.printer.label")),m.wc(4),m.fd("ngForOf",e.printers),m.wc(1),m.fd("ngIf",e.formGroup.controls.printerType.value&&e.formGroup.controls.printerType.value!==e.connectionType.None),m.wc(3),m.Ad(m.ad(12,26,"setting.device.printer.ipAddress")),m.wc(4),m.fd("ngIf",e.formGroup.controls.printerIpAddress.invalid&&e.formGroup.controls.printerIpAddress.touched),m.wc(1),m.fd("innerHtml",m.ad(17,28,"setting.device.printer.ipAddressDescription"),m.sd),m.wc(4),m.Ad(m.ad(21,30,"setting.device.cashchanger.label")),m.wc(4),m.fd("innerHtml",m.ad(25,32,"setting.device.cashchanger.description"),m.sd),m.wc(2),m.fd("ngIf",e.formGroup.controls.cashchanger.invalid&&e.formGroup.controls.cashchanger.touched),m.wc(1),m.fd("disabled",e.isConnected),m.wc(1),m.Ad(m.ad(29,34,"setting.device.connect")),m.wc(2),m.fd("disabled",e.isConnected),m.wc(1),m.Ad(m.ad(32,36,"setting.device.endDeposit")),m.wc(2),m.fd("disabled",e.isConnected),m.wc(1),m.Ad(m.ad(35,38,"setting.device.readCounts")),m.wc(2),m.fd("disabled",e.isConnected),m.wc(1),m.Ad(m.ad(38,40,"setting.device.collectAll")),m.wc(2),m.fd("disabled",e.isConnected),m.wc(1),m.Ad(m.ad(41,42,"setting.device.collectPart")),m.wc(4),m.Ad(m.ad(45,44,"setting.device.payment.label")),m.wc(4),m.fd("ngIf",e.formGroup.controls.payment.invalid&&e.formGroup.controls.payment.touched),m.wc(1),m.fd("disabled",e.isConnected),m.wc(1),m.Ad(m.ad(51,46,"setting.device.connect")))},directives:[P.s,P.l,P.e,P.p,P.k,P.d,O.b,o.k,o.l,P.a,P.n,P.r],pipes:[h.c],styles:[""]});n("icHh");var M=n("WxsR");class V{transform(t,e,n){e=void 0===e?"JP":e,n=void 0===n?"National":n;const o=M.c(t);return"JP"!==o.country?t:M.a(o,n).replace(/\-/g,"")}}V.\u0275fac=function(t){return new(t||V)},V.\u0275pipe=m.Ic({name:"libphonenumberFormat",type:V,pure:!0});const _=["intlTelInput"];function W(t,e){if(1&t&&(m.Pc(0,"p"),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t){const t=m.Yc().$implicit;m.wc(1),m.Ad(m.ad(2,1,"form.label."+t))}}function H(t,e){if(1&t&&(m.Pc(0,"p"),m.zd(1),m.Zc(2,"changeLanguage"),m.Oc()),2&t){const t=m.Yc().$implicit,e=m.Yc();var n;m.wc(1),m.Bd(" ",m.ad(2,1,null==(n=e.getAdditionalProperty(t))?null:n.label),"")}}function U(t,e){1&t&&(m.Pc(0,"p",15),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd("",m.ad(2,1,"form.required")," "))}function Q(t,e){if(1&t&&(m.Kc(0,"input",16),m.Zc(1,"translate")),2&t){const t=m.Yc().$implicit;m.fd("formControlName",t)("id",t)("placeholder",m.ad(1,3,"form.placeholder."+t))}}function X(t,e){if(1&t&&(m.Kc(0,"input",17),m.Zc(1,"translate")),2&t){const t=m.Yc().$implicit;m.fd("formControlName",t)("id",t)("placeholder",m.ad(1,3,"form.placeholder."+t))}}const tt=function(t){return[t]},et=function(t,e){return[t,e]};function nt(t,e){if(1&t&&m.Kc(0,"ngx-intl-tel-input",18,19),2&t){const t=m.Yc(2);m.fd("preferredCountries",m.hd(11,tt,t.CountryISO.Japan))("enableAutoCountrySelect",!1)("enablePlaceholder",!0)("searchCountryFlag",!0)("searchCountryField",m.id(13,et,t.SearchCountryField.Iso2,t.SearchCountryField.Name))("selectFirstCountry",!1)("selectedCountryISO",t.CountryISO.Japan)("maxLength",15)("tooltipField",t.TooltipLabel.Name)("phoneValidation",!0)("separateDialCode",!1)}}function ot(t,e){if(1&t&&(m.Pc(0,"option",22),m.zd(1),m.Zc(2,"changeLanguage"),m.Oc()),2&t){const t=e.$implicit;m.fd("value",t.value),m.wc(1),m.Bd(" ",m.ad(2,2,t.label)," ")}}function rt(t,e){if(1&t&&(m.Pc(0,"select",20),m.xd(1,ot,3,4,"option",21),m.Oc()),2&t){const t=m.Yc().$implicit;var n;const e=null==(n=m.Yc().getProfileProperty(t))?null:n.option;m.fd("formControlName",t)("id",t),m.wc(1),m.fd("ngForOf",e)}}function it(t,e){if(1&t&&m.Kc(0,"input",23),2&t){const t=m.Yc().$implicit;m.fd("formControlName",t)("id",t)}}function ct(t,e){if(1&t&&m.Kc(0,"textarea",24),2&t){const t=m.Yc().$implicit;m.fd("formControlName",t)("id",t)}}function at(t,e){if(1&t&&(m.Pc(0,"option",22),m.zd(1),m.Zc(2,"changeLanguage"),m.Oc()),2&t){const t=e.$implicit;m.fd("value",t.value),m.wc(1),m.Bd(" ",m.ad(2,2,t.label)," ")}}function st(t,e){if(1&t&&(m.Pc(0,"select",24),m.xd(1,at,3,4,"option",21),m.Oc()),2&t){const t=m.Yc().$implicit;var n;const e=null==(n=m.Yc().getAdditionalProperty(t))?null:n.option;m.fd("formControlName",t)("id",t),m.wc(1),m.fd("ngForOf",e)}}function lt(t,e){1&t&&(m.Pc(0,"p",27),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd(" ",m.ad(2,1,"form.validation.required")," "))}const dt=function(t){return{value:t}};function pt(t,e){if(1&t&&(m.Pc(0,"p",27),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t){const t=m.Yc(2).$implicit,e=m.Yc();m.wc(1),m.Bd(" ",m.bd(2,1,"form.validation.maxlength",m.hd(4,dt,null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.maxlength.requiredLength))," ")}}function ut(t,e){if(1&t&&(m.Pc(0,"p",27),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t){const t=m.Yc(2).$implicit,e=m.Yc();m.wc(1),m.Bd(" ",m.bd(2,1,"form.validation.minlength",m.hd(4,dt,null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.minlength.requiredLength))," ")}}function ft(t,e){1&t&&(m.Pc(0,"p",27),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd(" ",m.ad(2,1,"form.validation.email")," "))}function mt(t,e){1&t&&(m.Pc(0,"p",27),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd(" ",m.ad(2,1,"form.validation.telephone")," "))}function ht(t,e){1&t&&(m.Pc(0,"p",27),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd(" ",m.ad(2,1,"form.validation.fullKana"),""))}function gt(t,e){1&t&&(m.Pc(0,"p",27),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd(" ",m.ad(2,1,"form.validation.lowercaseLetters"),""))}function vt(t,e){if(1&t&&(m.Pc(0,"div"),m.xd(1,ht,3,3,"p",26),m.xd(2,gt,3,3,"p",26),m.Oc()),2&t){const t=m.Yc(2).$implicit,e=m.Yc();m.wc(1),m.fd("ngIf","ja"===e.language&&(null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.customPattern)),m.wc(1),m.fd("ngIf","ja"!==e.language&&(null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.customPattern))}}function yt(t,e){1&t&&(m.Pc(0,"p",27),m.zd(1),m.Zc(2,"translate"),m.Oc()),2&t&&(m.wc(1),m.Bd(" ",m.ad(2,1,"form.validation.pattern")," "))}function Pt(t,e){if(1&t&&(m.Pc(0,"div",25),m.xd(1,lt,3,3,"p",26),m.xd(2,pt,3,6,"p",26),m.xd(3,ut,3,6,"p",26),m.xd(4,ft,3,3,"p",26),m.xd(5,mt,3,3,"p",26),m.xd(6,vt,3,2,"div",5),m.xd(7,yt,3,3,"p",26),m.Oc()),2&t){const t=m.Yc().$implicit,e=m.Yc();m.wc(1),m.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.required),m.wc(1),m.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.maxlength),m.wc(1),m.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.minlength),m.wc(1),m.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.email),m.wc(1),m.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.validatePhoneNumber),m.wc(1),m.fd("ngIf","familyName"===t||"givenName"===t),m.wc(1),m.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.pattern)}}function Ot(t,e){if(1&t&&(m.Pc(0,"div",2),m.Pc(1,"div",3),m.Pc(2,"div",4),m.xd(3,W,3,3,"p",5),m.xd(4,H,3,3,"p",5),m.xd(5,U,3,3,"p",6),m.Oc(),m.Oc(),m.Pc(6,"div",7),m.xd(7,Q,2,5,"input",8),m.xd(8,X,2,5,"input",9),m.xd(9,nt,2,16,"ngx-intl-tel-input",10),m.xd(10,rt,2,3,"select",11),m.xd(11,it,1,2,"input",12),m.xd(12,ct,1,2,"textarea",13),m.xd(13,st,2,3,"select",13),m.xd(14,Pt,8,7,"div",14),m.Oc(),m.Oc()),2&t){const t=e.$implicit,i=m.Yc();var n=null;const c=i.getAdditionalProperty(t)&&"input"===(null==(n=i.getAdditionalProperty(t))?null:n.inputType);var o=null;const a=i.getAdditionalProperty(t)&&"textarea"===(null==(o=i.getAdditionalProperty(t))?null:o.inputType);var r=null;const s=i.getAdditionalProperty(t)&&"select"===(null==(r=i.getAdditionalProperty(t))?null:r.inputType);m.wc(3),m.fd("ngIf",!i.getAdditionalProperty(t)),m.wc(1),m.fd("ngIf",i.getAdditionalProperty(t)),m.wc(1),m.fd("ngIf",i.isRequired(t)),m.wc(2),m.fd("ngIf","email"!==t&&"telephone"!==t&&"gender"!==t&&!i.getAdditionalProperty(t)),m.wc(1),m.fd("ngIf","email"===t),m.wc(1),m.fd("ngIf","telephone"===t),m.wc(1),m.fd("ngIf","gender"===t),m.wc(1),m.fd("ngIf",c),m.wc(1),m.fd("ngIf",a),m.wc(1),m.fd("ngIf",s),m.wc(1),m.fd("ngIf",i.formGroup.controls[t].invalid&&i.formGroup.controls[t].touched)}}class wt{constructor(t,e){this.translate=t,this.formBuilder=e,this.environment=Object(d.a)(),this.SearchCountryField=O.e,this.TooltipLabel=O.f,this.CountryISO=O.a,this.valueChanges=new m.w}ngOnInit(){this.formGroup=this.createForm(),this.valueChanges.emit(this.formGroup),this.subscription=this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit(this.formGroup)}),setTimeout(()=>{if(void 0===this.intlTelInput)return;const t=this.intlTelInput.allCountries.find(t=>t.iso2===O.a.Japan);void 0!==t&&(t.placeHolder=this.translate.instant("form.placeholder.telephone"))},0)}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}createForm(){const t=this.environment.PROFILE,e=this.formBuilder.group({});if(t.forEach(t=>{const n=[];void 0!==t.required&&t.required&&n.push(P.q.required),void 0!==t.maxLength&&n.push(P.q.maxLength(t.maxLength)),void 0!==t.minLength&&n.push(P.q.minLength(t.minLength)),void 0!==t.pattern&&n.push(P.q.pattern(t.pattern)),"familyName"!==t.key&&"givenName"!==t.key||n.push(e=>{const n=e.root.get(t.key),o=document.documentElement.lang;if(null!==n){if(""===n.value)return null;if("ja"===o&&!new RegExp(/^[\u30a1-\u30f6\u30fc]+$/).test(n.value))return{customPattern:!0};if("ja"!==o&&!new RegExp(/^[a-z]+$/).test(n.value))return{customPattern:!0}}return null}),"email"===t.key&&n.push(P.q.email),e.addControl(t.key,new P.c(t.value,n))}),void 0===this.profile)return e;Object.keys(this.profile).forEach(t=>{const n=this.profile[t];void 0!==n&&void 0!==e.controls[t]&&("telephone"!==t?e.controls[t].setValue(n):e.controls.telephone.setValue((new V).transform(n)))});const n=this.profile.additionalProperty;return void 0!==n&&n.forEach(t=>{const n="additionalProperty."+t.name,o=t.value;void 0!==o&&void 0!==e.controls[n]&&e.controls[n].setValue(o)}),e}isRequired(t){return void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.formGroup.controls)}getProfileProperty(t){return this.environment.PROFILE.find(e=>e.key===t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}copyDomain(){const t=this.translate.instant("email.domain"),e=document.createElement("textarea");e.value=t,e.selectionStart=0,e.selectionEnd=e.value.length,document.body.appendChild(e),e.focus(),document.execCommand("copy"),e.blur(),document.body.removeChild(e)}}wt.\u0275fac=function(t){return new(t||wt)(m.Jc(h.d),m.Jc(P.b))},wt.\u0275cmp=m.Dc({type:wt,selectors:[["app-input-customer"]],viewQuery:function(t,e){var n;(1&t&&m.Ed(_,!0),2&t)&&(m.nd(n=m.Xc())&&(e.intlTelInput=n.first))},inputs:{profile:"profile",language:"language"},outputs:{valueChanges:"valueChanges"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-group row align-items-center",4,"ngFor","ngForOf"],[1,"form-group","row","align-items-center"],[1,"col-md-4","py-2","text-md-right"],[1,"d-inline-flex","align-items-center"],[4,"ngIf"],["class","badge badge-danger ml-2",4,"ngIf"],[1,"col-md-8"],["type","text","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["type","email","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode",4,"ngIf"],["class","form-control",3,"formControlName","id",4,"ngIf"],["type","text","class","form-control","placeholder","",3,"formControlName","id",4,"ngIf"],["class","form-control","placeholder","",3,"formControlName","id",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"badge","badge-danger","ml-2"],["type","text",1,"form-control",3,"formControlName","id","placeholder"],["type","email",1,"form-control",3,"formControlName","id","placeholder"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode"],["intlTelInput",""],[1,"form-control",3,"formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","",1,"form-control",3,"formControlName","id"],["placeholder","",1,"form-control",3,"formControlName","id"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,e){1&t&&(m.Pc(0,"form",0),m.xd(1,Ot,15,11,"div",1),m.Oc()),2&t&&(m.fd("formGroup",e.formGroup),m.wc(1),m.fd("ngForOf",e.getProfileFormKeys()))},directives:[P.s,P.l,P.e,o.k,o.l,P.a,P.k,P.d,O.b,O.c,P.p,P.n,P.r],pipes:[h.c,b.a],styles:["input[_ngcontent-%COMP%], ngx-intl-tel-input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{display:block;width:75%}@media (max-width:767.98px){input[_ngcontent-%COMP%], ngx-intl-tel-input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{min-height:5rem}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}"]});var bt=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{s(o.next(t))}catch(e){i(e)}}function a(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}s((o=o.apply(t,e||[])).next())}))};function Ct(t,e){if(1&t){const t=m.Qc();m.Pc(0,"app-input-app",17),m.Wc("valueChanges",(function(e){m.rd(t);return m.Yc().appForm=e})),m.Oc()}if(2&t){const t=m.Yc();m.fd("theaters",t.theaters)("data",null==t.inputData?null:t.inputData.app)}}function It(t,e){if(1&t){const t=m.Qc();m.Pc(0,"app-input-device",18),m.Wc("valueChanges",(function(e){m.rd(t);return m.Yc().deviceForm=e}))("print",(function(){m.rd(t);return m.Yc().print()}))("payment",(function(){m.rd(t);return m.Yc().payment()}))("cashchanger",(function(e){m.rd(t);return m.Yc().cashchanger(e)})),m.Oc()}if(2&t){const t=m.Yc();m.fd("data",null==t.inputData?null:t.inputData.device)("isConnected",t.epsonEPOSService.cashchanger.isConnected())}}function xt(t,e){if(1&t){const t=m.Qc();m.Pc(0,"app-input-customer",19),m.Wc("valueChanges",(function(e){m.rd(t);return m.Yc().profileForm=e})),m.Zc(1,"async"),m.Oc()}if(2&t){const t=m.Yc();var n;const e=null==(n=m.ad(1,2,t.user))?null:n.language;m.fd("profile",t.inputData.profile)("language",e)}}class Ft{constructor(t,e,n,o,r,i,c,a,s,l){this.epsonEPOSService=t,this.store=e,this.utilService=n,this.actionService=o,this.masterService=r,this.translate=i,this.router=c,this.paymentService=a,this.cinerinoService=s,this.modal=l,this.environment=Object(d.a)()}ngOnInit(){return bt(this,void 0,void 0,(function*(){this.user=this.store.pipe(Object(a.m)(u.g)),this.error=this.store.pipe(Object(a.m)(u.a)),this.isLoading=this.store.pipe(Object(a.m)(u.b)),this.posList=[],this.theaters=[];try{this.theaters=yield this.masterService.searchMovieTheaters();const{theater:t,pos:e,applicationType:n,applicationPassword:o,printer:r,cashchanger:i,payment:c,customerContact:a}=yield this.actionService.user.getData();this.inputData={app:{theater:t,pos:e,applicationType:n,applicationPassword:o},device:{printerType:null==r?void 0:r.connectionType,printerIpAddress:null==r?void 0:r.ipAddress,cashchanger:i,payment:c},profile:a}}catch(t){console.error(t),this.router.navigate(["/error"])}try{const{cashchanger:t}=yield this.actionService.user.getData();void 0!==t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:t}),yield this.epsonEPOSService.cashchanger.endDeposit({endDepositType:"DEPOSIT_REPAY"}),yield this.epsonEPOSService.cashchanger.disconnect())}catch(t){console.error(t)}}))}onSubmit(){return bt(this,void 0,void 0,(function*(){if(Object.keys(this.appForm.controls).forEach(t=>{this.appForm.controls[t].markAsTouched()}),Object.keys(this.deviceForm.controls).forEach(t=>{this.deviceForm.controls[t].markAsTouched()}),Object.keys(this.profileForm.controls).forEach(t=>{this.profileForm.controls[t].markAsTouched()}),this.appForm.invalid||this.deviceForm.invalid||this.profileForm.invalid)this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("setting.alert.validation")});else try{const t=this.appForm.controls.theaterId.value,e=this.appForm.controls.posId.value,n=this.theaters.find(e=>e.id===t);if(void 0===n)throw new Error("theater not found");const o=void 0===n.hasPOS?n.hasPOS:n.hasPOS.find(t=>t.id===e);this.actionService.user.updateAll({pos:o,theater:n,profile:{familyName:void 0===this.profileForm.controls.familyName?void 0:this.profileForm.controls.familyName.value,givenName:void 0===this.profileForm.controls.givenName?void 0:this.profileForm.controls.givenName.value,email:void 0===this.profileForm.controls.email?void 0:this.profileForm.controls.email.value,telephone:void 0===this.profileForm.controls.telephone?void 0:this.profileForm.controls.telephone.value.e164Number,age:void 0===this.profileForm.controls.age?void 0:this.profileForm.controls.age.value,address:void 0===this.profileForm.controls.address?void 0:this.profileForm.controls.address.value,gender:void 0===this.profileForm.controls.gender?void 0:this.profileForm.controls.gender.value},printer:{ipAddress:this.deviceForm.controls.printerIpAddress.value,connectionType:this.deviceForm.controls.printerType.value},cashchanger:void 0===this.deviceForm.controls.cashchanger.value?void 0:this.deviceForm.controls.cashchanger.value,payment:void 0===this.deviceForm.controls.payment.value?void 0:this.deviceForm.controls.payment.value,applicationType:this.appForm.controls.applicationType.value,applicationPassword:this.appForm.controls.applicationPassword.value}),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.success")})}catch(t){console.error(t)}}))}print(){return bt(this,void 0,void 0,(function*(){const t={connectionType:this.deviceForm.controls.printerType.value,ipAddress:this.deviceForm.controls.printerIpAddress.value};try{yield this.actionService.order.print({orders:[],printer:t})}catch(e){console.error(e),this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <p class="mb-4">${this.translate.instant("setting.alert.print")}</p>\n                    <div class="p-3 bg-light-gray select-text">\n                    <code>${"{}"===JSON.stringify(e)?e:JSON.stringify(e)}</code>\n                </div>`})}}))}cashchanger(t){return bt(this,void 0,void 0,(function*(){try{const e=this.deviceForm.controls.cashchanger.value;if("connect"===t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:e}),yield this.epsonEPOSService.cashchanger.disconnect(),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.connection")})),"endDeposit"===t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:e}),yield this.epsonEPOSService.cashchanger.endDeposit({endDepositType:"DEPOSIT_REPAY"}),yield this.epsonEPOSService.cashchanger.disconnect()),"readCounts"===t){yield this.epsonEPOSService.cashchanger.init({ipAddress:e});const t=yield this.epsonEPOSService.cashchanger.readCounts();yield this.epsonEPOSService.cashchanger.disconnect(),console.log("counts",t),this.modal.show(f.a,{initialState:{counts:t},class:"modal-dialog-centered modal-lg"})}"collectAll"!==t&&"collectPart"!==t||this.utilService.openConfirm({title:this.translate.instant("common.confirm"),body:this.translate.instant("setting.confirm.collect"),cb:()=>bt(this,void 0,void 0,(function*(){try{const n="collectAll"===t?"ALL_CASH":"PART_OF_CASH";yield this.epsonEPOSService.cashchanger.init({ipAddress:e}),yield this.epsonEPOSService.cashchanger.collect({collectType:n}),yield this.epsonEPOSService.cashchanger.disconnect()}catch(n){console.error(n),this.utilService.openAlert({title:this.translate.instant("common.error"),body:"",error:"{}"===JSON.stringify(n)?n:JSON.stringify(n)})}}))})}catch(e){console.error(e),this.utilService.openAlert({title:this.translate.instant("common.error"),body:"",error:"{}"===JSON.stringify(e)?e:JSON.stringify(e)})}}))}payment(){return bt(this,void 0,void 0,(function*(){try{const t=this.deviceForm.controls.payment.value;yield this.paymentService.init({ipAddress:t});const e=yield this.paymentService.exec({func:l.b.Purchase.Payment.FUNC_CODE.TERMINAL.COMMUNICATION});console.log(e),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.connection")})}catch(t){console.error(t);const e=void 0===t.message?t:t.message;this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <div class="p-3 bg-light-gray select-text">\n                    <code>${e}</code>\n                </div>`})}}))}signOut(){return bt(this,void 0,void 0,(function*(){try{yield this.cinerinoService.getServices(),yield this.cinerinoService.signOut()}catch(t){console.error(t)}}))}}Ft.\u0275fac=function(t){return new(t||Ft)(m.Jc(p.c),m.Jc(a.b),m.Jc(p.f),m.Jc(p.a),m.Jc(p.d),m.Jc(h.d),m.Jc(i.b),m.Jc(p.e),m.Jc(p.b),m.Jc(s.b))},Ft.\u0275cmp=m.Dc({type:Ft,selectors:[["app-setting"]],decls:36,vars:28,consts:[[3,"title"],[1,"contents"],[1,"container","h-100","px-3","pb-3"],[1,"row","h-100"],[1,"col-2","h-100"],[1,"col-8","h-100","scroll-horizontal"],[1,"text-large","font-weight-bold","bg-light-gray","border-left","border-white-bold","border-primary","p-3","mb-4"],[3,"theaters","data","valueChanges",4,"ngIf"],[3,"data","isConnected","valueChanges","print","payment","cashchanger",4,"ngIf"],[3,"profile","language","valueChanges",4,"ngIf"],[1,"col-2"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"container","h-100"],[1,"row","align-items-center","justify-content-center","h-100"],[1,"col-3"],["type","button",1,"btn","btn-outline-light","btn-block","font-weight-bold","py-2",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","font-weight-bold","py-2",3,"disabled","click"],[3,"theaters","data","valueChanges"],[3,"data","isConnected","valueChanges","print","payment","cashchanger"],[3,"profile","language","valueChanges"]],template:function(t,e){1&t&&(m.Kc(0,"app-header"),m.Kc(1,"app-page-title",0),m.Zc(2,"translate"),m.Pc(3,"div",1),m.Pc(4,"div",2),m.Pc(5,"div",3),m.Kc(6,"div",4),m.Pc(7,"div",5),m.Pc(8,"p",6),m.zd(9),m.Zc(10,"translate"),m.Oc(),m.xd(11,Ct,1,2,"app-input-app",7),m.Pc(12,"p",6),m.zd(13),m.Zc(14,"translate"),m.Oc(),m.xd(15,It,1,2,"app-input-device",8),m.Pc(16,"p",6),m.zd(17),m.Zc(18,"translate"),m.Oc(),m.xd(19,xt,2,4,"app-input-customer",9),m.Oc(),m.Pc(20,"div",10),m.Pc(21,"button",11),m.Wc("click",(function(){return e.signOut()})),m.zd(22),m.Zc(23,"translate"),m.Oc(),m.Oc(),m.Oc(),m.Oc(),m.Oc(),m.Pc(24,"app-footer"),m.Pc(25,"div",12),m.Pc(26,"div",13),m.Pc(27,"div",14),m.Pc(28,"button",15),m.zd(29),m.Zc(30,"translate"),m.Oc(),m.Oc(),m.Pc(31,"div",14),m.Pc(32,"button",16),m.Wc("click",(function(){return e.onSubmit()})),m.Zc(33,"async"),m.zd(34),m.Zc(35,"translate"),m.Oc(),m.Oc(),m.Oc(),m.Oc(),m.Oc()),2&t&&(m.wc(1),m.gd("title",m.ad(2,12,"setting.title")),m.wc(8),m.Bd(" ",m.ad(10,14,"setting.application.title")," "),m.wc(2),m.fd("ngIf",null==e.inputData?null:e.inputData.app),m.wc(2),m.Bd(" ",m.ad(14,16,"setting.device.title")," "),m.wc(2),m.fd("ngIf",null==e.inputData?null:e.inputData.device),m.wc(2),m.Bd(" ",m.ad(18,18,"setting.basic.title")," "),m.wc(2),m.fd("ngIf",e.inputData),m.wc(3),m.Ad(m.ad(23,20,"setting.signOut")),m.wc(6),m.fd("routerLink",e.environment.BASE_URL),m.wc(1),m.Ad(m.ad(30,22,"setting.prev")),m.wc(3),m.fd("disabled",m.ad(33,24,e.isLoading)),m.wc(2),m.Ad(m.ad(35,26,"setting.next")))},directives:[g.a,v.a,o.l,y.a,i.c,z,K,wt],pipes:[h.c,o.b],styles:[""]});const St=[{path:"",component:c.a,children:[{path:"",component:Ft}]}];class At{}At.\u0275mod=m.Hc({type:At}),At.\u0275inj=m.Gc({factory:function(t){return new(t||At)},imports:[[i.d.forChild(St)],i.d]});class Gt{}Gt.\u0275mod=m.Hc({type:Gt}),Gt.\u0275inj=m.Gc({factory:function(t){return new(t||Gt)},imports:[[o.c,At,r.a]]})}}]);