(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{AL2A:function(t,e,n){"use strict";n.r(e),n.d(e,"SettingModule",(function(){return ct}));var o=n("2kYt"),i=n("DSWM"),r=n("sEIs"),c=n("RRjC"),s=n("nIj0"),a=n("sN6X"),l=n("ddJ1"),d=n("x8Mb"),p=n("PIN6"),h=n("cHUu"),m=n("mOXJ"),u=n("WxsR"),g=n("EM62");class f{transform(t,e,n){e=void 0===e?"JP":e,n=void 0===n?"National":n;const o=u.c(t);return"JP"!==o.country?t:u.a(o,n).replace(/\-/g,"")}}f.\u0275fac=function(t){return new(t||f)},f.\u0275pipe=g.Ic({name:"libphonenumberFormat",type:f,pure:!0});var v=n("s2Ay"),y=n("cc8N"),P=n("KLHf"),O=n("us+Q"),b=n("OSFB"),F=function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function c(t){try{a(o.next(t))}catch(e){r(e)}}function s(t){try{a(o.throw(t))}catch(e){r(e)}}function a(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,s)}a((o=o.apply(t,e||[])).next())}))};const w=["intlTelInput"];function I(t,e){if(1&t&&(g.Pc(0,"p"),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t){const t=g.Yc().$implicit;g.wc(1),g.Ad(g.ad(2,1,"form.label."+t))}}function C(t,e){if(1&t&&(g.Pc(0,"p"),g.zd(1),g.Zc(2,"changeLanguage"),g.Oc()),2&t){const t=g.Yc().$implicit,e=g.Yc(2);var n;g.wc(1),g.Bd(" ",g.ad(2,1,null==(n=e.getAdditionalProperty(t))?null:n.label),"")}}function S(t,e){1&t&&(g.Pc(0,"p",44),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t&&(g.wc(1),g.Bd(" ",g.ad(2,1,"form.required")," "))}function A(t,e){if(1&t&&(g.Kc(0,"input",45),g.Zc(1,"translate")),2&t){const t=g.Yc().$implicit;g.fd("formControlName",t)("id",t)("placeholder",g.ad(1,3,"form.placeholder."+t))}}function x(t,e){if(1&t&&(g.Pc(0,"option",33),g.zd(1),g.Zc(2,"changeLanguage"),g.Oc()),2&t){const t=e.$implicit;g.fd("value",t.branchCode),g.wc(1),g.Bd(" ",g.ad(2,2,t.name),"")}}function T(t,e){if(1&t){const t=g.Qc();g.Pc(0,"select",46),g.Wc("change",(function(){g.rd(t);return g.Yc(3).changePosList()})),g.Pc(1,"option",47),g.zd(2),g.Zc(3,"translate"),g.Oc(),g.xd(4,x,3,4,"option",22),g.Oc()}if(2&t){const t=g.Yc().$implicit,e=g.Yc(2);g.fd("formControlName",t),g.wc(2),g.Ad(g.ad(3,3,"setting.unselected")),g.wc(2),g.fd("ngForOf",e.theaters)}}function N(t,e){if(1&t&&(g.Pc(0,"option",33),g.zd(1),g.Oc()),2&t){const t=e.$implicit;g.fd("value",t.id),g.wc(1),g.Ad(t.name)}}function Z(t,e){if(1&t&&(g.Pc(0,"select",48),g.Pc(1,"option",47),g.zd(2),g.Zc(3,"translate"),g.Oc(),g.xd(4,N,2,2,"option",22),g.Oc()),2&t){const t=g.Yc().$implicit,e=g.Yc(2);g.fd("formControlName",t),g.wc(2),g.Ad(g.ad(3,3,"setting.unselected")),g.wc(2),g.fd("ngForOf",e.posList)}}function z(t,e){if(1&t&&(g.Kc(0,"input",49),g.Zc(1,"translate")),2&t){const t=g.Yc().$implicit;g.fd("formControlName",t)("id",t)("placeholder",g.ad(1,3,"form.placeholder."+t))}}const L=function(t){return[t]},k=function(t,e){return[t,e]};function B(t,e){if(1&t&&g.Kc(0,"ngx-intl-tel-input",50,51),2&t){const t=g.Yc(3);g.fd("preferredCountries",g.hd(11,L,t.CountryISO.Japan))("enableAutoCountrySelect",!1)("enablePlaceholder",!0)("searchCountryFlag",!0)("searchCountryField",g.id(13,k,t.SearchCountryField.Iso2,t.SearchCountryField.Name))("selectFirstCountry",!1)("selectedCountryISO",t.CountryISO.Japan)("maxLength",15)("tooltipField",t.TooltipLabel.Name)("phoneValidation",!0)("separateDialCode",!1)}}function Y(t,e){if(1&t&&(g.Pc(0,"select",52),g.Pc(1,"option",47),g.zd(2),g.Zc(3,"translate"),g.Oc(),g.Pc(4,"option",53),g.zd(5),g.Zc(6,"translate"),g.Oc(),g.Pc(7,"option",54),g.zd(8),g.Zc(9,"translate"),g.Oc(),g.Oc()),2&t){const t=g.Yc().$implicit;g.fd("formControlName",t)("id",t),g.wc(2),g.Ad(g.ad(3,5,"form.option.unselected")),g.wc(3),g.Ad(g.ad(6,7,"form.option.man")),g.wc(3),g.Ad(g.ad(9,9,"form.option.woman"))}}function E(t,e){if(1&t&&g.Kc(0,"textarea",55),2&t){const t=g.Yc().$implicit;g.fd("formControlName",t)("id",t)}}function J(t,e){1&t&&(g.Pc(0,"p",58),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t&&(g.wc(1),g.Bd(" ",g.ad(2,1,"form.validation.required")," "))}const $=function(t){return{value:t}};function q(t,e){if(1&t&&(g.Pc(0,"p",58),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t){const t=g.Yc(2).$implicit,e=g.Yc(2);g.wc(1),g.Bd(" ",g.bd(2,1,"form.validation.maxlength",g.hd(4,$,null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.maxlength.requiredLength))," ")}}function D(t,e){1&t&&(g.Pc(0,"p",58),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t&&(g.wc(1),g.Bd(" ",g.ad(2,1,"form.validation.email")," "))}function K(t,e){1&t&&(g.Pc(0,"p",58),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t&&(g.wc(1),g.Bd(" ",g.ad(2,1,"form.validation.telephone")," "))}function V(t,e){1&t&&(g.Pc(0,"p",58),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t&&(g.wc(1),g.Bd(" ",g.ad(2,1,"form.validation.fullKana"),""))}function j(t,e){1&t&&(g.Pc(0,"p",58),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t&&(g.wc(1),g.Bd(" ",g.ad(2,1,"form.validation.lowercaseLetters"),""))}function R(t,e){if(1&t&&(g.Pc(0,"div"),g.xd(1,V,3,3,"p",57),g.Zc(2,"async"),g.xd(3,j,3,3,"p",57),g.Zc(4,"async"),g.Oc()),2&t){const t=g.Yc(2).$implicit,e=g.Yc(2);var n;const i="ja"===(null==(n=g.ad(2,2,e.user))?null:n.language)&&(null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.customPattern);var o;const r="ja"!==(null==(o=g.ad(4,4,e.user))?null:o.language)&&(null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.customPattern);g.wc(1),g.fd("ngIf",i),g.wc(2),g.fd("ngIf",r)}}function U(t,e){if(1&t&&(g.Pc(0,"div",56),g.xd(1,J,3,3,"p",57),g.xd(2,q,3,6,"p",57),g.xd(3,D,3,3,"p",57),g.xd(4,K,3,3,"p",57),g.xd(5,R,5,6,"div",35),g.Oc()),2&t){const t=g.Yc().$implicit,e=g.Yc(2);g.wc(1),g.fd("ngIf",null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.required),g.wc(1),g.fd("ngIf",null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.maxlength),g.wc(1),g.fd("ngIf",null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.email),g.wc(1),g.fd("ngIf",null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.validatePhoneNumber),g.wc(1),g.fd("ngIf","familyName"===t||"givenName"===t)}}function W(t,e){if(1&t&&(g.Pc(0,"div",18),g.Pc(1,"div",19),g.Pc(2,"div",34),g.xd(3,I,3,3,"p",35),g.xd(4,C,3,3,"p",35),g.xd(5,S,3,3,"p",36),g.Oc(),g.Oc(),g.Pc(6,"div",20),g.xd(7,A,2,5,"input",37),g.xd(8,T,5,5,"select",38),g.xd(9,Z,5,5,"select",39),g.xd(10,z,2,5,"input",40),g.xd(11,B,2,16,"ngx-intl-tel-input",41),g.xd(12,Y,10,11,"select",42),g.xd(13,E,1,2,"textarea",43),g.xd(14,U,6,5,"div",25),g.Oc(),g.Oc()),2&t){const t=e.$implicit,i=g.Yc(2);var n=null;const r="theaterBranchCode"!==t&&"posId"!==t&&"email"!==t&&"telephone"!==t&&"gender"!==t&&"textarea"!==(null==(n=i.getAdditionalProperty(t))?null:n.inputType);var o;const c="textarea"===(null==(o=i.getAdditionalProperty(t))?null:o.inputType);g.wc(3),g.fd("ngIf",!i.getAdditionalProperty(t)),g.wc(1),g.fd("ngIf",i.getAdditionalProperty(t)),g.wc(1),g.fd("ngIf",i.isRequired(t)),g.wc(2),g.fd("ngIf",r),g.wc(1),g.fd("ngIf","theaterBranchCode"===t),g.wc(1),g.fd("ngIf","posId"===t),g.wc(1),g.fd("ngIf","email"===t),g.wc(1),g.fd("ngIf","telephone"===t),g.wc(1),g.fd("ngIf","gender"===t),g.wc(1),g.fd("ngIf",c),g.wc(1),g.fd("ngIf",i.settingForm.controls[t].invalid&&i.settingForm.controls[t].touched)}}function H(t,e){if(1&t&&(g.Pc(0,"option",33),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t){const t=e.$implicit;g.fd("value",t.connectionType),g.wc(1),g.Bd(" ",g.ad(2,2,t.name),"")}}function M(t,e){if(1&t){const t=g.Qc();g.Pc(0,"button",59),g.Wc("click",(function(){g.rd(t);return g.Yc(2).print()})),g.zd(1),g.Zc(2,"translate"),g.Oc()}2&t&&(g.wc(1),g.Ad(g.ad(2,1,"setting.device.printer.testPrinting")))}function G(t,e){1&t&&(g.Pc(0,"p",58),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t&&(g.wc(1),g.Bd(" ",g.ad(2,1,"form.validation.required"),""))}function Q(t,e){if(1&t&&(g.Pc(0,"div",56),g.xd(1,G,3,3,"p",57),g.Oc()),2&t){const t=g.Yc(2);g.wc(1),g.fd("ngIf",null==t.settingForm.controls.printerIpAddress.errors?null:t.settingForm.controls.printerIpAddress.errors.required)}}function _(t,e){1&t&&(g.Pc(0,"p",58),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t&&(g.wc(1),g.Bd(" ",g.ad(2,1,"form.validation.required"),""))}function X(t,e){if(1&t&&(g.Pc(0,"div",56),g.xd(1,_,3,3,"p",57),g.Oc()),2&t){const t=g.Yc(2);g.wc(1),g.fd("ngIf",null==t.settingForm.controls.cashchanger.errors?null:t.settingForm.controls.cashchanger.errors.required)}}function tt(t,e){1&t&&(g.Pc(0,"p",58),g.zd(1),g.Zc(2,"translate"),g.Oc()),2&t&&(g.wc(1),g.Bd(" ",g.ad(2,1,"form.validation.required"),""))}function et(t,e){if(1&t&&(g.Pc(0,"div",56),g.xd(1,tt,3,3,"p",57),g.Oc()),2&t){const t=g.Yc(2);g.wc(1),g.fd("ngIf",null==t.settingForm.controls.payment.errors?null:t.settingForm.controls.payment.errors.required)}}function nt(t,e){if(1&t){const t=g.Qc();g.Pc(0,"form",14),g.Pc(1,"div",15),g.Pc(2,"p",16),g.zd(3),g.Zc(4,"translate"),g.Oc(),g.xd(5,W,15,11,"div",17),g.Oc(),g.Pc(6,"div",15),g.Pc(7,"p",16),g.zd(8),g.Zc(9,"translate"),g.Oc(),g.Pc(10,"div",18),g.Pc(11,"p",19),g.zd(12),g.Zc(13,"translate"),g.Oc(),g.Pc(14,"div",20),g.Pc(15,"select",21),g.Wc("change",(function(){g.rd(t);return g.Yc().changePrinterType()})),g.xd(16,H,3,4,"option",22),g.Oc(),g.xd(17,M,3,3,"button",23),g.Oc(),g.Oc(),g.Pc(18,"div",18),g.Pc(19,"p",19),g.zd(20),g.Zc(21,"translate"),g.Oc(),g.Pc(22,"div",20),g.Kc(23,"input",24),g.xd(24,Q,2,1,"div",25),g.Kc(25,"p",26),g.Zc(26,"translate"),g.Oc(),g.Oc(),g.Pc(27,"div",18),g.Pc(28,"p",19),g.zd(29),g.Zc(30,"translate"),g.Oc(),g.Pc(31,"div",20),g.Kc(32,"input",27),g.Kc(33,"p",26),g.Zc(34,"translate"),g.xd(35,X,2,1,"div",25),g.Pc(36,"button",28),g.Wc("click",(function(){g.rd(t);return g.Yc().connectCash()})),g.zd(37),g.Zc(38,"translate"),g.Oc(),g.Pc(39,"button",29),g.Wc("click",(function(){g.rd(t);return g.Yc().endDeposit()})),g.zd(40),g.Zc(41,"translate"),g.Oc(),g.Oc(),g.Oc(),g.Pc(42,"div",18),g.Pc(43,"p",19),g.zd(44),g.Zc(45,"translate"),g.Oc(),g.Pc(46,"div",20),g.Kc(47,"input",30),g.xd(48,et,2,1,"div",25),g.Pc(49,"button",31),g.Wc("click",(function(){g.rd(t);return g.Yc().connectPayment()})),g.zd(50),g.Zc(51,"translate"),g.Oc(),g.Oc(),g.Oc(),g.Oc(),g.Pc(52,"div",15),g.Pc(53,"p",16),g.zd(54),g.Zc(55,"translate"),g.Oc(),g.Pc(56,"div",18),g.Pc(57,"p",19),g.zd(58),g.Zc(59,"translate"),g.Oc(),g.Pc(60,"div",20),g.Pc(61,"select",32),g.Pc(62,"option",33),g.zd(63),g.Zc(64,"translate"),g.Oc(),g.Pc(65,"option",33),g.zd(66),g.Zc(67,"translate"),g.Oc(),g.Oc(),g.Oc(),g.Oc(),g.Oc(),g.Oc()}if(2&t){const t=g.Yc();g.fd("formGroup",t.settingForm),g.wc(3),g.Bd(" ",g.ad(4,26,"setting.basic.title")," "),g.wc(2),g.fd("ngForOf",t.getProfileFormKeys()),g.wc(3),g.Bd(" ",g.ad(9,28,"setting.device.title")," "),g.wc(4),g.Ad(g.ad(13,30,"setting.device.printer.label")),g.wc(4),g.fd("ngForOf",t.printers),g.wc(1),g.fd("ngIf",t.settingForm.controls.printerType.value&&t.settingForm.controls.printerType.value!==t.connectionType.None),g.wc(3),g.Ad(g.ad(21,32,"setting.device.printer.ipAddress")),g.wc(4),g.fd("ngIf",t.settingForm.controls.printerIpAddress.invalid&&t.settingForm.controls.printerIpAddress.touched),g.wc(1),g.fd("innerHtml",g.ad(26,34,"setting.device.printer.ipAddressDescription"),g.sd),g.wc(4),g.Ad(g.ad(30,36,"setting.device.cashchanger.label")),g.wc(4),g.fd("innerHtml",g.ad(34,38,"setting.device.cashchanger.description"),g.sd),g.wc(2),g.fd("ngIf",t.settingForm.controls.cashchanger.invalid&&t.settingForm.controls.cashchanger.touched),g.wc(1),g.fd("disabled",t.epsonEPOSService.cashchanger.isConnected()),g.wc(1),g.Ad(g.ad(38,40,"setting.device.connect")),g.wc(2),g.fd("disabled",t.epsonEPOSService.cashchanger.isConnected()),g.wc(1),g.Ad(g.ad(41,42,"setting.device.endDeposit")),g.wc(4),g.Ad(g.ad(45,44,"setting.device.payment.label")),g.wc(4),g.fd("ngIf",t.settingForm.controls.payment.invalid&&t.settingForm.controls.payment.touched),g.wc(2),g.Ad(g.ad(51,46,"setting.device.connect")),g.wc(4),g.Bd(" ",g.ad(55,48,"setting.application.title")," "),g.wc(4),g.Bd(" ",g.ad(59,50,"setting.application.applicationType.label")," "),g.wc(4),g.fd("value",t.applicationType.Tvm),g.wc(1),g.Bd(" ",g.ad(64,52,"setting.application.applicationType.option.tvm")," "),g.wc(2),g.fd("value",t.applicationType.Printer),g.wc(1),g.Bd(" ",g.ad(67,54,"setting.application.applicationType.option.printer")," ")}}class ot{constructor(t,e,n,o,i,r,c,s,a,h){this.epsonEPOSService=t,this.formBuilder=e,this.store=n,this.utilService=o,this.actionService=i,this.masterService=r,this.translate=c,this.router=s,this.paymentService=a,this.cinerinoService=h,this.printers=d.b.Util.Printer.printers,this.connectionType=d.b.Util.Printer.ConnectionType,this.viewType=d.b.Util.ViewType,this.environment=Object(p.a)(),this.SearchCountryField=l.e,this.TooltipLabel=l.f,this.CountryISO=l.a,this.applicationType=d.b.Util.Application.ApplicationType}ngOnInit(){return F(this,void 0,void 0,(function*(){this.user=this.store.pipe(Object(a.m)(m.g)),this.error=this.store.pipe(Object(a.m)(m.a)),this.isLoading=this.store.pipe(Object(a.m)(m.b)),this.posList=[],this.theaters=[];try{this.theaters=yield this.masterService.searchMovieTheaters(),yield this.createSettlingForm()}catch(t){console.error(t),this.router.navigate(["/error"])}try{const t=this.settingForm.controls.cashchanger.value;""!==t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:t}),yield this.epsonEPOSService.cashchanger.endDeposit({endDepositType:"DEPOSIT_REPAY"}),this.epsonEPOSService.cashchanger.disconnect())}catch(t){console.error(t)}setTimeout(()=>{if(void 0===this.intlTelInput)return;const t=this.intlTelInput.allCountries.find(t=>t.iso2===l.a.Japan);void 0!==t&&(t.placeHolder=this.translate.instant("form.placeholder.telephone"))},0)}))}createSettlingForm(){return F(this,void 0,void 0,(function*(){const t=this.environment.PROFILE;this.settingForm=this.formBuilder.group({theaterBranchCode:["",[s.r.required]],posId:[""],printerType:[d.b.Util.Printer.ConnectionType.None],printerIpAddress:[""],cashchanger:[""],payment:[""],applicationType:[d.b.Util.Application.ApplicationType.Tvm]}),t.forEach(t=>{const e=[];void 0!==t.required&&t.required&&e.push(s.r.required),void 0!==t.maxLength&&e.push(s.r.maxLength(t.maxLength)),void 0!==t.minLength&&e.push(s.r.minLength(t.minLength)),void 0!==t.pattern&&e.push(s.r.pattern(t.pattern)),"email"===t.key&&e.push(s.r.email),this.settingForm.addControl(t.key,new s.c(t.value,e))});const e=yield this.actionService.user.getData();void 0!==e.theater&&(this.settingForm.controls.theaterBranchCode.setValue(e.theater.branchCode),this.changePosList()),void 0!==e.pos&&this.settingForm.controls.posId.setValue(e.pos.id);const n=e.customerContact;void 0!==n&&Object.keys(n).forEach(t=>{const e=n[t];void 0!==e&&void 0!==this.settingForm.controls[t]&&("telephone"!==t?this.settingForm.controls[t].setValue(e):this.settingForm.controls.telephone.setValue((new f).transform(e)))}),void 0!==e.printer&&(this.settingForm.controls.printerType.setValue(e.printer.connectionType),this.settingForm.controls.printerIpAddress.setValue(e.printer.ipAddress)),void 0!==e.cashchanger&&this.settingForm.controls.cashchanger.setValue(e.cashchanger),void 0!==e.payment&&this.settingForm.controls.payment.setValue(e.payment),void 0!==e.applicationType&&this.settingForm.controls.applicationType.setValue(e.applicationType)}))}changePosList(){this.settingForm.controls.posId.setValue("");const t=this.settingForm.controls.theaterBranchCode.value;if(""===t)return void(this.posList=[]);const e=this.theaters.find(e=>e.branchCode===t);this.posList=void 0!==e?void 0===e.hasPOS?[]:e.hasPOS:[]}onSubmit(){return F(this,void 0,void 0,(function*(){if(Object.keys(this.settingForm.controls).forEach(t=>{this.settingForm.controls[t].markAsTouched()}),this.settingForm.invalid)this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("setting.alert.validation")});else try{const t=this.settingForm.controls.theaterBranchCode.value,e=this.settingForm.controls.posId.value,n=this.theaters.find(e=>e.branchCode===t);if(void 0===n)throw new Error("theater not found");const o=void 0===n.hasPOS?n.hasPOS:n.hasPOS.find(t=>t.id===e);this.actionService.user.updateAll({pos:o,theater:n,profile:{familyName:void 0===this.settingForm.controls.familyName?void 0:this.settingForm.controls.familyName.value,givenName:void 0===this.settingForm.controls.givenName?void 0:this.settingForm.controls.givenName.value,email:void 0===this.settingForm.controls.email?void 0:this.settingForm.controls.email.value,telephone:void 0===this.settingForm.controls.telephone?void 0:this.settingForm.controls.telephone.value.e164Number,age:void 0===this.settingForm.controls.age?void 0:this.settingForm.controls.age.value,address:void 0===this.settingForm.controls.address?void 0:this.settingForm.controls.address.value,gender:void 0===this.settingForm.controls.gender?void 0:this.settingForm.controls.gender.value},printer:{ipAddress:this.settingForm.controls.printerIpAddress.value,connectionType:this.settingForm.controls.printerType.value},cashchanger:void 0===this.settingForm.controls.cashchanger.value?void 0:this.settingForm.controls.cashchanger.value,payment:void 0===this.settingForm.controls.payment.value?void 0:this.settingForm.controls.payment.value,applicationType:this.settingForm.controls.applicationType.value}),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.success")})}catch(t){console.error(t)}}))}print(){return F(this,void 0,void 0,(function*(){const t={connectionType:this.settingForm.controls.printerType.value,ipAddress:this.settingForm.controls.printerIpAddress.value};try{yield this.actionService.order.print({orders:[],printer:t})}catch(e){console.error(e),this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <p class="mb-4">${this.translate.instant("setting.alert.print")}</p>\n                    <div class="p-3 bg-light-gray select-text">\n                    <code>${"{}"===JSON.stringify(e)?e:JSON.stringify(e)}</code>\n                </div>`})}}))}changePrinterType(){this.settingForm.controls.printerType.value===d.b.Util.Printer.ConnectionType.StarBluetooth&&this.settingForm.controls.printerIpAddress.setValue(this.translate.instant("setting.device.starBluetoothAddress"))}isRequired(t){return"theaterBranchCode"===t||void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.settingForm.controls).filter(t=>"printerType"!==t&&"printerIpAddress"!==t&&"payment"!==t&&"cashchanger"!==t&&"applicationType"!==t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}connectCash(){return F(this,void 0,void 0,(function*(){try{const t=this.settingForm.controls.cashchanger.value;yield this.epsonEPOSService.cashchanger.init({ipAddress:t}),yield this.epsonEPOSService.cashchanger.disconnect(),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.connection")})}catch(t){console.error(t);const e=void 0===t.message?t:t.message;this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <div class="p-3 bg-light-gray select-text">\n                    <code>${e}</code>\n                </div>`})}}))}endDeposit(){return F(this,void 0,void 0,(function*(){try{const t=this.settingForm.controls.cashchanger.value;yield this.epsonEPOSService.cashchanger.init({ipAddress:t}),yield this.epsonEPOSService.cashchanger.endDeposit({endDepositType:"DEPOSIT_REPAY"}),yield this.epsonEPOSService.cashchanger.disconnect()}catch(t){console.error(t);const e=void 0===t.message?t:t.message;this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <div class="p-3 bg-light-gray select-text">\n                    <code>${e}</code>\n                </div>`})}}))}connectPayment(){return F(this,void 0,void 0,(function*(){try{const t=this.settingForm.controls.payment.value;yield this.paymentService.init({ipAddress:t});const e=yield this.paymentService.exec({func:d.b.Purchase.Payment.FUNC_CODE.TERMINAL.COMMUNICATION});console.log(e),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.connection")})}catch(t){console.error(t);const e=void 0===t.message?t:t.message;this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <div class="p-3 bg-light-gray select-text">\n                    <code>${e}</code>\n                </div>`})}}))}signOut(){return F(this,void 0,void 0,(function*(){try{yield this.cinerinoService.getServices(),yield this.cinerinoService.signOut()}catch(t){console.error(t)}}))}}ot.\u0275fac=function(t){return new(t||ot)(g.Jc(h.c),g.Jc(s.b),g.Jc(a.b),g.Jc(h.f),g.Jc(h.a),g.Jc(h.d),g.Jc(v.d),g.Jc(r.b),g.Jc(h.e),g.Jc(h.b))},ot.\u0275cmp=g.Dc({type:ot,selectors:[["app-setting"]],viewQuery:function(t,e){var n;(1&t&&g.Ed(w,!0),2&t)&&(g.nd(n=g.Xc())&&(e.intlTelInput=n.first))},decls:25,vars:17,consts:[[3,"title"],[1,"contents"],[1,"container","h-100","px-3","pb-3"],[1,"row","h-100"],[1,"col-2","h-100"],[1,"col-8","h-100","scroll-horizontal"],[3,"formGroup",4,"ngIf"],[1,"col-2"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"container","h-100"],[1,"row","align-items-center","justify-content-center","h-100"],[1,"col-3"],["type","button",1,"btn","btn-outline-light","btn-block","font-weight-bold","py-2",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","font-weight-bold","py-2",3,"disabled","click"],[3,"formGroup"],[1,"mb-5"],[1,"text-large","font-weight-bold","bg-light-gray","border-left","border-white-bold","border-primary","p-3","mb-4"],["class","form-group row",4,"ngFor","ngForOf"],[1,"form-group","row"],[1,"col-4","text-right","py-3"],[1,"col-8"],["formControlName","printerType",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","button","class","btn btn-sm btn-primary py-2 mt-2",3,"click",4,"ngIf"],["type","text","formControlName","printerIpAddress","placeholder","0.0.0.0",1,"form-control"],["class","mt-2",4,"ngIf"],[1,"text-small","mt-2",3,"innerHtml"],["type","text","formControlName","cashchanger","placeholder","0.0.0.0",1,"form-control"],["type","button",1,"btn","btn-primary","mt-2","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-primary","mt-2",3,"disabled","click"],["type","text","formControlName","payment","placeholder","0.0.0.0",1,"form-control"],["type","button",1,"btn","btn-primary","mt-2",3,"click"],["formControlName","applicationType",1,"form-control"],[3,"value"],[1,"d-inline-flex","align-items-center"],[4,"ngIf"],["class","badge badge-danger ml-2",4,"ngIf"],["type","text","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["class","form-control",3,"formControlName","change",4,"ngIf"],["class","form-control",3,"formControlName",4,"ngIf"],["type","email","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode",4,"ngIf"],["class","form-control",3,"formControlName","id",4,"ngIf"],["class","form-control","placeholder","",3,"formControlName","id",4,"ngIf"],[1,"badge","badge-danger","ml-2"],["type","text",1,"form-control",3,"formControlName","id","placeholder"],[1,"form-control",3,"formControlName","change"],["value",""],[1,"form-control",3,"formControlName"],["type","email",1,"form-control",3,"formControlName","id","placeholder"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode"],["intlTelInput",""],[1,"form-control",3,"formControlName","id"],["value","man"],["value","woman"],["placeholder","",1,"form-control",3,"formControlName","id"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","button",1,"btn","btn-sm","btn-primary","py-2","mt-2",3,"click"]],template:function(t,e){1&t&&(g.Kc(0,"app-header"),g.Kc(1,"app-page-title",0),g.Zc(2,"translate"),g.Pc(3,"div",1),g.Pc(4,"div",2),g.Pc(5,"div",3),g.Kc(6,"div",4),g.Pc(7,"div",5),g.xd(8,nt,68,56,"form",6),g.Oc(),g.Pc(9,"div",7),g.Pc(10,"button",8),g.Wc("click",(function(){return e.signOut()})),g.zd(11),g.Zc(12,"translate"),g.Oc(),g.Oc(),g.Oc(),g.Oc(),g.Oc(),g.Pc(13,"app-footer"),g.Pc(14,"div",9),g.Pc(15,"div",10),g.Pc(16,"div",11),g.Pc(17,"button",12),g.zd(18),g.Zc(19,"translate"),g.Oc(),g.Oc(),g.Pc(20,"div",11),g.Pc(21,"button",13),g.Wc("click",(function(){return e.onSubmit()})),g.Zc(22,"async"),g.zd(23),g.Zc(24,"translate"),g.Oc(),g.Oc(),g.Oc(),g.Oc(),g.Oc()),2&t&&(g.wc(1),g.gd("title",g.ad(2,7,"setting.title")),g.wc(7),g.fd("ngIf",e.settingForm),g.wc(3),g.Ad(g.ad(12,9,"setting.signOut")),g.wc(6),g.fd("routerLink",e.environment.BASE_URL),g.wc(1),g.Ad(g.ad(19,11,"setting.prev")),g.wc(3),g.fd("disabled",g.ad(22,13,e.isLoading)),g.wc(2),g.Ad(g.ad(24,15,"setting.next")))},directives:[y.a,P.a,o.l,O.a,r.c,s.t,s.l,s.e,o.k,s.q,s.k,s.d,l.b,s.a,s.o,s.s,l.c],pipes:[v.c,o.b,b.a],styles:[""]});const it=[{path:"",component:c.a,children:[{path:"",component:ot}]}];class rt{}rt.\u0275mod=g.Hc({type:rt}),rt.\u0275inj=g.Gc({factory:function(t){return new(t||rt)},imports:[[r.d.forChild(it)],r.d]});class ct{}ct.\u0275mod=g.Hc({type:ct}),ct.\u0275inj=g.Gc({factory:function(t){return new(t||ct)},imports:[[o.c,rt,i.a]]})}}]);