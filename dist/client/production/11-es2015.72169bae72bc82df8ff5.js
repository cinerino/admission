(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{AL2A:function(t,e,n){"use strict";n.r(e),n.d(e,"SettingModule",(function(){return ct}));var o=n("2kYt"),r=n("DSWM"),i=n("sEIs"),c=n("RRjC"),d=n("nIj0"),s=n("sN6X"),a=n("ddJ1"),l=n("x8Mb"),m=n("PIN6"),p=n("cHUu"),u=n("mOXJ"),y=n("UH/6"),h=n("EM62"),g=n("s2Ay"),f=n("OSFB"),v=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{s(o.next(t))}catch(e){i(e)}}function d(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,d)}s((o=o.apply(t,e||[])).next())}))};const F=["intlTelInput"];function C(t,e){if(1&t&&(h.Rc(0,"p"),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t){const t=h.bd().$implicit;h.yc(1),h.Bd(h.dd(2,1,"form.label."+t))}}function b(t,e){if(1&t&&(h.Rc(0,"p"),h.Ad(1),h.cd(2,"changeLanguage"),h.Qc()),2&t){const t=h.bd().$implicit,e=h.bd(2);var n;h.yc(1),h.Cd(" ",h.dd(2,1,null==(n=e.getAdditionalProperty(t))?null:n.label),"")}}function I(t,e){1&t&&(h.Rc(0,"p",38),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd("",h.dd(2,1,"form.required")," "))}function A(t,e){if(1&t&&(h.Mc(0,"input",39),h.cd(1,"translate")),2&t){const t=h.bd().$implicit;h.id("formControlName",t)("id",t)("placeholder",h.dd(1,3,"form.placeholder."+t))}}function R(t,e){if(1&t&&(h.Rc(0,"option",42),h.Ad(1),h.cd(2,"changeLanguage"),h.Qc()),2&t){const t=e.$implicit;h.id("value",t.branchCode),h.yc(1),h.Cd(" ",h.dd(2,2,t.name),"")}}function Q(t,e){if(1&t){const t=h.Sc();h.Rc(0,"select",40),h.Zc("change",(function(){return h.sd(t),h.bd(3).changePosList()})),h.Rc(1,"option",41),h.Ad(2),h.cd(3,"translate"),h.Qc(),h.yd(4,R,3,4,"option",13),h.Qc()}if(2&t){const t=h.bd().$implicit,e=h.bd(2);h.id("formControlName",t),h.yc(2),h.Bd(h.dd(3,3,"setting.unselected")),h.yc(2),h.id("ngForOf",e.theaters)}}function N(t,e){if(1&t&&(h.Rc(0,"option",42),h.Ad(1),h.Qc()),2&t){const t=e.$implicit;h.id("value",t.id),h.yc(1),h.Bd(t.name)}}function L(t,e){if(1&t&&(h.Rc(0,"select",43),h.Rc(1,"option",41),h.Ad(2),h.cd(3,"translate"),h.Qc(),h.yd(4,N,2,2,"option",13),h.Qc()),2&t){const t=h.bd().$implicit,e=h.bd(2);h.id("formControlName",t),h.yc(2),h.Bd(h.dd(3,3,"setting.unselected")),h.yc(2),h.id("ngForOf",e.posList)}}function S(t,e){if(1&t&&(h.Mc(0,"input",44),h.cd(1,"translate")),2&t){const t=h.bd().$implicit;h.id("formControlName",t)("id",t)("placeholder",h.dd(1,3,"form.placeholder."+t))}}const x=function(t){return[t]},T=function(t,e){return[t,e]};function P(t,e){if(1&t&&h.Mc(0,"ngx-intl-tel-input",45,46),2&t){const t=h.bd(3);h.id("preferredCountries",h.jd(11,x,t.CountryISO.Japan))("enableAutoCountrySelect",!1)("enablePlaceholder",!0)("searchCountryFlag",!0)("searchCountryField",h.kd(13,T,t.SearchCountryField.Iso2,t.SearchCountryField.Name))("selectFirstCountry",!1)("selectedCountryISO",t.CountryISO.Japan)("maxLength",15)("tooltipField",t.TooltipLabel.Name)("phoneValidation",!0)("separateDialCode",!1)}}function B(t,e){if(1&t&&(h.Rc(0,"select",47),h.Rc(1,"option",41),h.Ad(2),h.cd(3,"translate"),h.Qc(),h.Rc(4,"option",48),h.Ad(5),h.cd(6,"translate"),h.Qc(),h.Rc(7,"option",49),h.Ad(8),h.cd(9,"translate"),h.Qc(),h.Qc()),2&t){const t=h.bd().$implicit;h.id("formControlName",t)("id",t),h.yc(2),h.Bd(h.dd(3,5,"form.option.unselected")),h.yc(3),h.Bd(h.dd(6,7,"form.option.man")),h.yc(3),h.Bd(h.dd(9,9,"form.option.woman"))}}function O(t,e){if(1&t&&h.Mc(0,"textarea",50),2&t){const t=h.bd().$implicit;h.id("formControlName",t)("id",t)}}function w(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.required")," "))}const k=function(t){return{value:t}};function q(t,e){if(1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t){const t=h.bd(2).$implicit,e=h.bd(2);h.yc(1),h.Cd(" ",h.ed(2,1,"form.validation.maxlength",h.jd(4,k,null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.maxlength.requiredLength))," ")}}function E(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.email")," "))}function j(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.telephone")," "))}function $(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.fullKana"),""))}function M(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.lowercaseLetters"),""))}function V(t,e){if(1&t&&(h.Rc(0,"div"),h.yd(1,$,3,3,"p",52),h.cd(2,"async"),h.yd(3,M,3,3,"p",52),h.cd(4,"async"),h.Qc()),2&t){const t=h.bd(2).$implicit,e=h.bd(2);var n;const r="ja"===(null==(n=h.dd(2,2,e.user))?null:n.language)&&(null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.customPattern);var o;const i="ja"!==(null==(o=h.dd(4,4,e.user))?null:o.language)&&(null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.customPattern);h.yc(1),h.id("ngIf",r),h.yc(2),h.id("ngIf",i)}}function J(t,e){if(1&t&&(h.Rc(0,"div",51),h.yd(1,w,3,3,"p",52),h.yd(2,q,3,6,"p",52),h.yd(3,E,3,3,"p",52),h.yd(4,j,3,3,"p",52),h.yd(5,V,5,6,"div",29),h.Qc()),2&t){const t=h.bd().$implicit,e=h.bd(2);h.yc(1),h.id("ngIf",null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.required),h.yc(1),h.id("ngIf",null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.maxlength),h.yc(1),h.id("ngIf",null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.email),h.yc(1),h.id("ngIf",null==e.settingForm.controls[t].errors?null:e.settingForm.controls[t].errors.validatePhoneNumber),h.yc(1),h.id("ngIf","familyName"===t||"givenName"===t)}}function U(t,e){if(1&t&&(h.Rc(0,"div",27),h.Rc(1,"div",10),h.Rc(2,"div",28),h.yd(3,C,3,3,"p",29),h.yd(4,b,3,3,"p",29),h.yd(5,I,3,3,"p",30),h.Qc(),h.Qc(),h.Rc(6,"div",11),h.yd(7,A,2,5,"input",31),h.yd(8,Q,5,5,"select",32),h.yd(9,L,5,5,"select",33),h.yd(10,S,2,5,"input",34),h.yd(11,P,2,16,"ngx-intl-tel-input",35),h.yd(12,B,10,11,"select",36),h.yd(13,O,1,2,"textarea",37),h.yd(14,J,6,5,"div",16),h.Qc(),h.Qc()),2&t){const t=e.$implicit,r=h.bd(2);var n=null;const i="theaterBranchCode"!==t&&"posId"!==t&&"email"!==t&&"telephone"!==t&&"gender"!==t&&"textarea"!==(null==(n=r.getAdditionalProperty(t))?null:n.inputType);var o;const c="textarea"===(null==(o=r.getAdditionalProperty(t))?null:o.inputType);h.yc(3),h.id("ngIf",!r.getAdditionalProperty(t)),h.yc(1),h.id("ngIf",r.getAdditionalProperty(t)),h.yc(1),h.id("ngIf",r.isRequired(t)),h.yc(2),h.id("ngIf",i),h.yc(1),h.id("ngIf","theaterBranchCode"===t),h.yc(1),h.id("ngIf","posId"===t),h.yc(1),h.id("ngIf","email"===t),h.yc(1),h.id("ngIf","telephone"===t),h.yc(1),h.id("ngIf","gender"===t),h.yc(1),h.id("ngIf",c),h.yc(1),h.id("ngIf",r.settingForm.controls[t].invalid&&r.settingForm.controls[t].touched)}}function D(t,e){if(1&t&&(h.Rc(0,"option",42),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t){const t=e.$implicit;h.id("value",t.connectionType),h.yc(1),h.Cd(" ",h.dd(2,2,t.name),"")}}function H(t,e){if(1&t){const t=h.Sc();h.Rc(0,"button",54),h.Zc("click",(function(){return h.sd(t),h.bd(2).print()})),h.Ad(1),h.cd(2,"translate"),h.Qc()}2&t&&(h.yc(1),h.Bd(h.dd(2,1,"setting.printer.testPrinting")))}function G(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.required"),""))}function Z(t,e){if(1&t&&(h.Rc(0,"div",51),h.yd(1,G,3,3,"p",52),h.Qc()),2&t){const t=h.bd(2);h.yc(1),h.id("ngIf",null==t.settingForm.controls.printerIpAddress.errors?null:t.settingForm.controls.printerIpAddress.errors.required)}}function K(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.required"),""))}function X(t,e){if(1&t&&(h.Rc(0,"div",51),h.yd(1,K,3,3,"p",52),h.Qc()),2&t){const t=h.bd(2);h.yc(1),h.id("ngIf",null==t.settingForm.controls.paymentCash.errors?null:t.settingForm.controls.paymentCash.errors.required)}}function W(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.required"),""))}function Y(t,e){if(1&t&&(h.Rc(0,"div",51),h.yd(1,W,3,3,"p",52),h.Qc()),2&t){const t=h.bd(2);h.yc(1),h.id("ngIf",null==t.settingForm.controls.paymentCreditcard.errors?null:t.settingForm.controls.paymentCreditcard.errors.required)}}function _(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.required"),""))}function z(t,e){if(1&t&&(h.Rc(0,"div",51),h.yd(1,_,3,3,"p",52),h.Qc()),2&t){const t=h.bd(2);h.yc(1),h.id("ngIf",null==t.settingForm.controls.paymentEmoney.errors?null:t.settingForm.controls.paymentEmoney.errors.required)}}function tt(t,e){1&t&&(h.Rc(0,"p",53),h.Ad(1),h.cd(2,"translate"),h.Qc()),2&t&&(h.yc(1),h.Cd(" ",h.dd(2,1,"form.validation.required"),""))}function et(t,e){if(1&t&&(h.Rc(0,"div",51),h.yd(1,tt,3,3,"p",52),h.Qc()),2&t){const t=h.bd(2);h.yc(1),h.id("ngIf",null==t.settingForm.controls.paymentCode.errors?null:t.settingForm.controls.paymentCode.errors.required)}}function nt(t,e){if(1&t){const t=h.Sc();h.Rc(0,"form",2),h.Rc(1,"div",3),h.Rc(2,"h2",4),h.Ad(3),h.cd(4,"translate"),h.Qc(),h.Mc(5,"p",5),h.cd(6,"translate"),h.Rc(7,"div",6),h.yd(8,U,15,11,"div",7),h.Rc(9,"div",8),h.Rc(10,"div",9),h.Rc(11,"p",10),h.Ad(12),h.cd(13,"translate"),h.Qc(),h.Rc(14,"div",11),h.Rc(15,"select",12),h.Zc("change",(function(){return h.sd(t),h.bd().changePrinterType()})),h.yd(16,D,3,4,"option",13),h.Qc(),h.yd(17,H,3,3,"button",14),h.Qc(),h.Qc(),h.Qc(),h.Rc(18,"div",8),h.Rc(19,"div",9),h.Rc(20,"p",10),h.Ad(21),h.cd(22,"translate"),h.Qc(),h.Rc(23,"div",11),h.Mc(24,"input",15),h.yd(25,Z,2,1,"div",16),h.Rc(26,"p",17),h.Ad(27),h.cd(28,"translate"),h.Qc(),h.Qc(),h.Qc(),h.Qc(),h.Rc(29,"div",8),h.Rc(30,"div",18),h.Rc(31,"p",10),h.Ad(32),h.cd(33,"translate"),h.Qc(),h.Rc(34,"div",11),h.Rc(35,"div"),h.Rc(36,"p",19),h.Ad(37),h.cd(38,"translate"),h.Qc(),h.Mc(39,"input",20),h.yd(40,X,2,1,"div",16),h.Qc(),h.Rc(41,"div"),h.Rc(42,"p",19),h.Ad(43),h.cd(44,"translate"),h.Qc(),h.Mc(45,"input",21),h.yd(46,Y,2,1,"div",16),h.Qc(),h.Rc(47,"div"),h.Rc(48,"p",19),h.Ad(49),h.cd(50,"translate"),h.Qc(),h.Mc(51,"input",22),h.yd(52,z,2,1,"div",16),h.Qc(),h.Rc(53,"div"),h.Rc(54,"p",19),h.Ad(55),h.cd(56,"translate"),h.Qc(),h.Mc(57,"input",23),h.yd(58,et,2,1,"div",16),h.Qc(),h.Qc(),h.Qc(),h.Qc(),h.Qc(),h.Qc(),h.Rc(59,"div",24),h.Rc(60,"button",25),h.Zc("click",(function(){return h.sd(t),h.bd().onSubmit()})),h.cd(61,"async"),h.Ad(62),h.cd(63,"translate"),h.Qc(),h.Rc(64,"button",26),h.Ad(65),h.cd(66,"translate"),h.Qc(),h.Qc(),h.Qc()}if(2&t){const t=h.bd();h.id("formGroup",t.settingForm),h.yc(3),h.Bd(h.dd(4,23,"setting.title")),h.yc(2),h.id("innerHTML",h.dd(6,25,"setting.read"),h.td),h.yc(3),h.id("ngForOf",t.getProfileFormKeys()),h.yc(4),h.Bd(h.dd(13,27,"setting.printer.label")),h.yc(4),h.id("ngForOf",t.printers),h.yc(1),h.id("ngIf",t.settingForm.controls.printerType.value&&t.settingForm.controls.printerType.value!==t.connectionType.None),h.yc(4),h.Bd(h.dd(22,29,"setting.printer.ipAddress")),h.yc(4),h.id("ngIf",t.settingForm.controls.printerIpAddress.invalid&&t.settingForm.controls.printerIpAddress.touched),h.yc(2),h.Cd(" ",h.dd(28,31,"setting.printer.ipAddressDescription")," "),h.yc(5),h.Bd(h.dd(33,33,"setting.payment.label")),h.yc(5),h.Bd(h.dd(38,35,"setting.payment.cash.label")),h.yc(3),h.id("ngIf",t.settingForm.controls.paymentCash.invalid&&t.settingForm.controls.paymentCash.touched),h.yc(3),h.Bd(h.dd(44,37,"setting.payment.creditcard.label")),h.yc(3),h.id("ngIf",t.settingForm.controls.paymentCreditcard.invalid&&t.settingForm.controls.paymentCreditcard.touched),h.yc(3),h.Bd(h.dd(50,39,"setting.payment.emoney.label")),h.yc(3),h.id("ngIf",t.settingForm.controls.paymentEmoney.invalid&&t.settingForm.controls.paymentEmoney.touched),h.yc(3),h.Bd(h.dd(56,41,"setting.payment.code.label")),h.yc(3),h.id("ngIf",t.settingForm.controls.paymentCode.invalid&&t.settingForm.controls.paymentCode.touched),h.yc(2),h.id("disabled",h.dd(61,43,t.isLoading)),h.yc(2),h.Bd(h.dd(63,45,"setting.next")),h.yc(2),h.id("routerLink",t.environment.BASE_URL),h.yc(1),h.Bd(h.dd(66,47,"setting.prev"))}}class ot{constructor(t,e,n,o,r,i,c,d){this.formBuilder=t,this.store=e,this.utilService=n,this.userService=o,this.masterService=r,this.orderService=i,this.translate=c,this.router=d,this.printers=l.b.Util.Printer.printers,this.connectionType=l.b.Util.Printer.ConnectionType,this.viewType=l.b.Util.ViewType,this.environment=Object(m.a)(),this.SearchCountryField=a.d,this.TooltipLabel=a.e,this.CountryISO=a.a}ngOnInit(){return v(this,void 0,void 0,(function*(){this.user=this.store.pipe(Object(s.m)(u.g)),this.error=this.store.pipe(Object(s.m)(u.a)),this.isLoading=this.store.pipe(Object(s.m)(u.b)),this.posList=[],this.theaters=[];try{this.theaters=yield this.masterService.getTheaters(),yield this.createSettlingForm()}catch(t){console.error(t),this.router.navigate(["/error"])}setTimeout(()=>{if(void 0===this.intlTelInput)return;const t=this.intlTelInput.allCountries.find(t=>t.iso2===a.a.Japan);void 0!==t&&(t.placeHolder=this.translate.instant("form.placeholder.telephone"))},0)}))}createSettlingForm(){return v(this,void 0,void 0,(function*(){const t=this.environment.PROFILE;this.settingForm=this.formBuilder.group({theaterBranchCode:["",[d.p.required]],posId:[""],printerType:[l.b.Util.Printer.ConnectionType.None],printerIpAddress:[""],paymentCash:[""],paymentCreditcard:[""],paymentEmoney:[""],paymentCode:[""]}),t.forEach(t=>{const e=[];void 0!==t.required&&t.required&&e.push(d.p.required),void 0!==t.maxLength&&e.push(d.p.maxLength(t.maxLength)),void 0!==t.minLength&&e.push(d.p.minLength(t.minLength)),void 0!==t.pattern&&e.push(d.p.pattern(t.pattern)),"email"===t.key&&e.push(d.p.email),this.settingForm.addControl(t.key,new d.c(t.value,e))});const e=yield this.userService.getData();void 0!==e.theater&&(this.settingForm.controls.theaterBranchCode.setValue(e.theater.branchCode),this.changePosList()),void 0!==e.pos&&this.settingForm.controls.posId.setValue(e.pos.id);const n=e.customerContact;void 0!==n&&Object.keys(n).forEach(t=>{const e=n[t];void 0!==e&&void 0!==this.settingForm.controls[t]&&("telephone"!==t?this.settingForm.controls[t].setValue(e):this.settingForm.controls.telephone.setValue((new y.a).transform(e)))}),void 0!==e.printer&&(this.settingForm.controls.printerType.setValue(e.printer.connectionType),this.settingForm.controls.printerIpAddress.setValue(e.printer.ipAddress)),void 0!==e.payment&&void 0!==e.payment.cash&&this.settingForm.controls.paymentCash.setValue(e.payment.cash.ipAddress),void 0!==e.payment&&void 0!==e.payment.creditcard&&this.settingForm.controls.paymentCreditcard.setValue(e.payment.creditcard.ipAddress),void 0!==e.payment&&void 0!==e.payment.emoney&&this.settingForm.controls.paymentEmoney.setValue(e.payment.emoney.ipAddress),void 0!==e.payment&&void 0!==e.payment.code&&this.settingForm.controls.paymentCode.setValue(e.payment.code.ipAddress),console.log(this.settingForm)}))}changePosList(){this.settingForm.controls.posId.setValue("");const t=this.settingForm.controls.theaterBranchCode.value;if(""===t)return void(this.posList=[]);const e=this.theaters.find(e=>e.branchCode===t);this.posList=void 0!==e?void 0===e.hasPOS?[]:e.hasPOS:[]}onSubmit(){return v(this,void 0,void 0,(function*(){if(Object.keys(this.settingForm.controls).forEach(t=>{this.settingForm.controls[t].markAsTouched()}),this.settingForm.invalid)this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("setting.alert.validation")});else try{const t=this.settingForm.controls.theaterBranchCode.value,e=this.settingForm.controls.posId.value,n=this.theaters.find(e=>e.branchCode===t);if(void 0===n)throw new Error("theater not found").message;const o=void 0===n.hasPOS?n.hasPOS:n.hasPOS.find(t=>t.id===e),r={cash:""===this.settingForm.controls.paymentCash.value?void 0:{ipAddress:this.settingForm.controls.paymentCash.value},creditcard:""===this.settingForm.controls.paymentCreditcard.value?void 0:{ipAddress:this.settingForm.controls.paymentCreditcard.value},emoney:""===this.settingForm.controls.paymentEmoney.value?void 0:{ipAddress:this.settingForm.controls.paymentEmoney.value},code:""===this.settingForm.controls.paymentCode.value?void 0:{ipAddress:this.settingForm.controls.paymentCode.value}};this.userService.updateAll({pos:o,theater:n,customerContact:{familyName:void 0===this.settingForm.controls.familyName?void 0:this.settingForm.controls.familyName.value,givenName:void 0===this.settingForm.controls.givenName?void 0:this.settingForm.controls.givenName.value,email:void 0===this.settingForm.controls.email?void 0:this.settingForm.controls.email.value,telephone:void 0===this.settingForm.controls.telephone?void 0:this.settingForm.controls.telephone.value.e164Number,age:void 0===this.settingForm.controls.age?void 0:this.settingForm.controls.age.value,address:void 0===this.settingForm.controls.address?void 0:this.settingForm.controls.address.value,gender:void 0===this.settingForm.controls.gender?void 0:this.settingForm.controls.gender.value},printer:{ipAddress:this.settingForm.controls.printerIpAddress.value,connectionType:this.settingForm.controls.printerType.value},payment:void 0!==r.cash||void 0!==r.creditcard||void 0!==r.emoney||void 0!==r.code?r:void 0}),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.success")})}catch(t){console.error(t)}}))}print(){return v(this,void 0,void 0,(function*(){const t={connectionType:this.settingForm.controls.printerType.value,ipAddress:this.settingForm.controls.printerIpAddress.value};try{yield this.orderService.print({orders:[],printer:t})}catch(e){console.error(e),this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <p class="mb-4">${this.translate.instant("setting.alert.print")}</p>\n                    <div class="p-3 bg-light-gray select-text">\n                    <code>${e}</code>\n                </div>`})}}))}changePrinterType(){this.settingForm.controls.printerType.value===l.b.Util.Printer.ConnectionType.StarBluetooth&&this.settingForm.controls.printerIpAddress.setValue(this.translate.instant("setting.starBluetoothAddress"))}isRequired(t){return"theaterBranchCode"===t||void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.settingForm.controls).filter(t=>"printerType"!==t&&"printerIpAddress"!==t&&!/payment/.test(t))}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}}ot.\u0275fac=function(t){return new(t||ot)(h.Lc(d.b),h.Lc(s.b),h.Lc(p.k),h.Lc(p.j),h.Lc(p.c),h.Lc(p.d),h.Lc(g.d),h.Lc(i.b))},ot.\u0275cmp=h.Fc({type:ot,selectors:[["app-setting"]],viewQuery:function(t,e){var n;(1&t&&h.Gd(F,!0),2&t)&&(h.pd(n=h.ad())&&(e.intlTelInput=n.first))},decls:2,vars:1,consts:[[1,"contents-width","mx-auto","px-3","py-5"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],[1,"mb-4"],[1,"text-large","mb-4","text-center","font-weight-bold"],[1,"mb-4","text-md-center",3,"innerHTML"],[1,"p-3","bg-white"],["class","form-group row",4,"ngFor","ngForOf"],[1,"form-group"],[1,"row"],[1,"col-md-4","py-2","text-md-right"],[1,"col-md-8"],["formControlName","printerType",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","button","class","btn btn-sm btn-primary py-2 mt-2",3,"click",4,"ngIf"],["type","text","formControlName","printerIpAddress","placeholder","0.0.0.0",1,"form-control"],["class","mt-2",4,"ngIf"],[1,"text-small","mt-2"],[1,"row","align-items-center"],[1,"py-2"],["type","text","formControlName","paymentCash","placeholder","0.0.0.0",1,"form-control"],["type","text","formControlName","paymentCreditcard","placeholder","0.0.0.0",1,"form-control"],["type","text","formControlName","paymentEmoney","placeholder","0.0.0.0",1,"form-control"],["type","text","formControlName","paymentCode","placeholder","0.0.0.0",1,"form-control"],[1,"buttons","mx-auto","text-center"],["type","submit",1,"btn","btn-primary","btn-block","py-3","mb-3",3,"disabled","click"],["type","button",1,"btn","btn-link",3,"routerLink"],[1,"form-group","row"],[1,"d-inline-flex","align-items-center"],[4,"ngIf"],["class","badge badge-danger ml-2",4,"ngIf"],["type","text","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["class","form-control",3,"formControlName","change",4,"ngIf"],["class","form-control",3,"formControlName",4,"ngIf"],["type","email","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode",4,"ngIf"],["class","form-control",3,"formControlName","id",4,"ngIf"],["class","form-control","placeholder","",3,"formControlName","id",4,"ngIf"],[1,"badge","badge-danger","ml-2"],["type","text",1,"form-control",3,"formControlName","id","placeholder"],[1,"form-control",3,"formControlName","change"],["value",""],[3,"value"],[1,"form-control",3,"formControlName"],["type","email",1,"form-control",3,"formControlName","id","placeholder"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode"],["intlTelInput",""],[1,"form-control",3,"formControlName","id"],["value","man"],["value","woman"],["placeholder","",1,"form-control",3,"formControlName","id"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"],["type","button",1,"btn","btn-sm","btn-primary","py-2","mt-2",3,"click"]],template:function(t,e){1&t&&(h.Rc(0,"div",0),h.yd(1,nt,67,49,"form",1),h.Qc()),2&t&&(h.yc(1),h.id("ngIf",e.settingForm))},directives:[o.l,d.r,d.k,d.e,o.k,d.o,d.j,d.d,d.a,i.c,d.m,d.q,a.b],pipes:[g.c,o.b,f.a],styles:[""]});const rt=[{path:"",component:c.a,children:[{path:"",component:ot}]}];class it{}it.\u0275mod=h.Jc({type:it}),it.\u0275inj=h.Ic({factory:function(t){return new(t||it)},imports:[[i.d.forChild(rt)],i.d]});class ct{}ct.\u0275mod=h.Jc({type:ct}),ct.\u0275inj=h.Ic({factory:function(t){return new(t||ct)},imports:[[o.c,it,r.a]]})}}]);