(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{AL2A:function(t,e,n){"use strict";n.r(e),n.d(e,"SettingModule",(function(){return Ft}));var o=n("2kYt"),r=n("DSWM"),i=n("sEIs"),c=n("RRjC"),a=n("sN6X"),s=n("MMGj"),l=n("x8Mb"),d=n("PIN6"),p=n("cHUu"),u=n("mOXJ"),f=n("oDol"),h=n("EM62"),m=n("s2Ay"),g=n("cc8N"),v=n("KLHf"),y=n("us+Q"),P=n("nIj0"),O=n("ddJ1"),b=n("OSFB");function w(t,e){if(1&t&&(h.Pc(0,"p"),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t){const t=h.Yc(2).$implicit;h.wc(1),h.Bd(" ",h.ad(2,1,"form.label."+t)," ")}}function C(t,e){if(1&t&&(h.Pc(0,"p"),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t){const t=h.Yc(2).$implicit;h.wc(1),h.Bd(" ",h.ad(2,1,"setting.application."+t+".label")," ")}}function I(t,e){1&t&&(h.Pc(0,"p",12),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd("",h.ad(2,1,"form.required")," "))}function x(t,e){if(1&t&&(h.Pc(0,"option",16),h.zd(1),h.Zc(2,"changeLanguage"),h.Oc()),2&t){const t=e.$implicit;h.fd("value",t.id),h.wc(1),h.Bd(" ",h.ad(2,2,t.name),"")}}function F(t,e){if(1&t){const t=h.Qc();h.Pc(0,"select",13),h.Wc("change",(function(){h.rd(t);return h.Yc(3).changeTheater()})),h.Pc(1,"option",14),h.zd(2),h.Zc(3,"translate"),h.Oc(),h.xd(4,x,3,4,"option",15),h.Oc()}if(2&t){const t=h.Yc(2).$implicit,e=h.Yc();h.fd("formControlName",t),h.wc(2),h.Ad(h.ad(3,3,"setting.unselected")),h.wc(2),h.fd("ngForOf",e.theaters)}}function S(t,e){if(1&t&&(h.Pc(0,"option",16),h.zd(1),h.Oc()),2&t){const t=e.$implicit;h.fd("value",t.id),h.wc(1),h.Ad(t.name)}}function A(t,e){if(1&t&&(h.Pc(0,"select",17),h.Pc(1,"option",14),h.zd(2),h.Zc(3,"translate"),h.Oc(),h.xd(4,S,2,2,"option",15),h.Oc()),2&t){const t=h.Yc(2).$implicit,e=h.Yc();h.fd("formControlName",t),h.wc(2),h.Ad(h.ad(3,3,"setting.unselected")),h.wc(2),h.fd("ngForOf",e.posList)}}function G(t,e){if(1&t&&(h.Pc(0,"select",17),h.Pc(1,"option",16),h.zd(2),h.Zc(3,"translate"),h.Oc(),h.Pc(4,"option",16),h.zd(5),h.Zc(6,"translate"),h.Oc(),h.Oc()),2&t){const t=h.Yc(2).$implicit,e=h.Yc();h.fd("formControlName",t),h.wc(1),h.fd("value",e.applicationType.Tvm),h.wc(1),h.Bd(" ",h.ad(3,5,"setting.application.applicationType.option.tvm")," "),h.wc(2),h.fd("value",e.applicationType.Printer),h.wc(1),h.Bd(" ",h.ad(6,7,"setting.application.applicationType.option.printer")," ")}}function T(t,e){if(1&t&&h.Kc(0,"input",18),2&t){const t=h.Yc(2).$implicit;h.fd("formControlName",t)}}function N(t,e){if(1&t&&(h.Pc(0,"div",3),h.Pc(1,"div",4),h.Pc(2,"div",5),h.xd(3,w,3,3,"p",6),h.xd(4,C,3,3,"p",6),h.xd(5,I,3,3,"p",7),h.Oc(),h.Oc(),h.Pc(6,"div",8),h.xd(7,F,5,5,"select",9),h.xd(8,A,5,5,"select",10),h.xd(9,G,7,9,"select",10),h.xd(10,T,1,1,"input",11),h.Oc(),h.Oc()),2&t){const t=h.Yc().$implicit,e=h.Yc();h.wc(3),h.fd("ngIf",!("applicationType"===t||"applicationPassword"===t)),h.wc(1),h.fd("ngIf","applicationType"===t||"applicationPassword"===t),h.wc(1),h.fd("ngIf",e.isRequired(t)),h.wc(2),h.fd("ngIf","theaterId"===t),h.wc(1),h.fd("ngIf","posId"===t),h.wc(1),h.fd("ngIf","applicationType"===t),h.wc(1),h.fd("ngIf","applicationPassword"===t)}}function k(t,e){if(1&t&&(h.Nc(0),h.xd(1,N,11,7,"div",2),h.Mc()),2&t){const t=e.$implicit,n=h.Yc();h.wc(1),h.fd("ngIf",!("posId"===t&&0===n.posList.length))}}class Y{constructor(t){this.formBuilder=t,this.environment=Object(d.a)(),this.applicationType=l.b.Util.Application.ApplicationType,this.valueChanges=new h.w}ngOnInit(){this.posList=[],this.formGroup=this.createForm();const{theater:t,pos:e,applicationType:n,applicationPassword:o}=this.data;void 0!==t&&(this.formGroup.controls.theaterId.setValue(t.id),this.changeTheater()),void 0!==e&&this.formGroup.controls.posId.setValue(e.id),void 0!==n&&this.formGroup.controls.applicationType.setValue(n),void 0!==o&&this.formGroup.controls.applicationPassword.setValue(o),this.valueChanges.emit(this.formGroup),this.subscription=this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit(this.formGroup)})}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}createForm(){return this.formBuilder.group({theaterId:["",[P.q.required]],posId:[""],applicationType:[""],applicationPassword:[""]})}isRequired(t){return"theaterId"===t||void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.formGroup.controls)}getProfileProperty(t){return this.environment.PROFILE.find(e=>e.key===t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}changeTheater(){this.formGroup.controls.posId.setValue("");const t=this.formGroup.controls.theaterId.value,e=this.theaters.find(e=>e.id===t);this.posList=""!==t&&void 0!==e?void 0===e.hasPOS?[]:e.hasPOS:[]}}function Z(t,e){if(1&t&&(h.Pc(0,"option",14),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t){const t=e.$implicit;h.fd("value",t.connectionType),h.wc(1),h.Bd(" ",h.ad(2,2,t.name),"")}}function E(t,e){if(1&t){const t=h.Qc();h.Pc(0,"button",15),h.Wc("click",(function(){h.rd(t);return h.Yc().print.emit()})),h.zd(1),h.Zc(2,"translate"),h.Oc()}2&t&&(h.wc(1),h.Ad(h.ad(2,1,"setting.device.printer.testPrinting")))}function z(t,e){1&t&&(h.Pc(0,"p",18),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd(" ",h.ad(2,1,"form.validation.required"),""))}function L(t,e){if(1&t&&(h.Pc(0,"div",16),h.xd(1,z,3,3,"p",17),h.Oc()),2&t){const t=h.Yc();h.wc(1),h.fd("ngIf",null==t.formGroup.controls.printerIpAddress.errors?null:t.formGroup.controls.printerIpAddress.errors.required)}}function D(t,e){1&t&&(h.Pc(0,"p",18),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd(" ",h.ad(2,1,"form.validation.required"),""))}function B(t,e){if(1&t&&(h.Pc(0,"div",16),h.xd(1,D,3,3,"p",17),h.Oc()),2&t){const t=h.Yc();h.wc(1),h.fd("ngIf",null==t.formGroup.controls.cashchanger.errors?null:t.formGroup.controls.cashchanger.errors.required)}}function $(t,e){1&t&&(h.Pc(0,"p",18),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd(" ",h.ad(2,1,"form.validation.required"),""))}function q(t,e){if(1&t&&(h.Pc(0,"div",16),h.xd(1,$,3,3,"p",17),h.Oc()),2&t){const t=h.Yc();h.wc(1),h.fd("ngIf",null==t.formGroup.controls.payment.errors?null:t.formGroup.controls.payment.errors.required)}}Y.\u0275fac=function(t){return new(t||Y)(h.Jc(P.b))},Y.\u0275cmp=h.Dc({type:Y,selectors:[["app-input-app"]],inputs:{data:"data",theaters:"theaters"},outputs:{valueChanges:"valueChanges"},decls:2,vars:2,consts:[[3,"formGroup"],[4,"ngFor","ngForOf"],["class","form-group row align-items-center",4,"ngIf"],[1,"form-group","row","align-items-center"],[1,"col-4","py-2","text-right"],[1,"d-inline-flex","align-items-center"],[4,"ngIf"],["class","badge badge-danger ml-2",4,"ngIf"],[1,"col-8"],["class","form-control",3,"formControlName","change",4,"ngIf"],["class","form-control",3,"formControlName",4,"ngIf"],["type","password","class","form-control",3,"formControlName",4,"ngIf"],[1,"badge","badge-danger","ml-2"],[1,"form-control",3,"formControlName","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control",3,"formControlName"],["type","password",1,"form-control",3,"formControlName"]],template:function(t,e){1&t&&(h.Pc(0,"form",0),h.xd(1,k,2,1,"ng-container",1),h.Oc()),2&t&&(h.fd("formGroup",e.formGroup),h.wc(1),h.fd("ngForOf",e.getProfileFormKeys()))},directives:[P.s,P.l,P.e,o.k,o.l,P.p,P.k,P.d,O.b,P.n,P.r,P.a],pipes:[m.c,b.a],styles:[""]});class J{constructor(t,e){this.formBuilder=t,this.translate=e,this.environment=Object(d.a)(),this.connectionType=l.b.Util.Printer.ConnectionType,this.printers=l.b.Util.Printer.printers,this.valueChanges=new h.w,this.print=new h.w,this.payment=new h.w,this.cashchanger=new h.w}ngOnInit(){this.formGroup=this.createForm();const{printerType:t,printerIpAddress:e,cashchanger:n,payment:o}=this.data;void 0!==t&&(this.formGroup.controls.printerType.setValue(t),this.formGroup.controls.printerIpAddress.setValue(e)),void 0!==n&&this.formGroup.controls.cashchanger.setValue(n),void 0!==o&&this.formGroup.controls.payment.setValue(o),this.valueChanges.emit(this.formGroup),this.subscription=this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit(this.formGroup)})}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}createForm(){return this.formBuilder.group({printerType:[l.b.Util.Printer.ConnectionType.None],printerIpAddress:[""],cashchanger:[""],payment:[""]})}isRequired(t){return void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.formGroup.controls)}getProfileProperty(t){return this.environment.PROFILE.find(e=>e.key===t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}changePrinterType(){this.formGroup.controls.printerType.value===l.b.Util.Printer.ConnectionType.StarBluetooth&&this.formGroup.controls.printerIpAddress.setValue(this.translate.instant("setting.starBluetoothAddress"))}}J.\u0275fac=function(t){return new(t||J)(h.Jc(P.b),h.Jc(m.d))},J.\u0275cmp=h.Dc({type:J,selectors:[["app-input-device"]],inputs:{data:"data",isConnected:"isConnected"},outputs:{valueChanges:"valueChanges",print:"print",payment:"payment",cashchanger:"cashchanger"},decls:52,vars:48,consts:[[3,"formGroup"],[1,"form-group","row"],[1,"col-4","text-right","py-3"],[1,"col-8"],["formControlName","printerType",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","button","class","btn btn-sm btn-primary py-2 mt-2",3,"click",4,"ngIf"],["type","text","formControlName","printerIpAddress","placeholder","0.0.0.0",1,"form-control"],["class","mt-2",4,"ngIf"],[1,"text-small","mt-2",3,"innerHtml"],["type","text","formControlName","cashchanger","placeholder","0.0.0.0",1,"form-control"],["type","button",1,"btn","btn-primary","mt-2","mr-2",3,"disabled","click"],["type","button",1,"btn","btn-primary","mt-2",3,"disabled","click"],["type","text","formControlName","payment","placeholder","0.0.0.0",1,"form-control"],[3,"value"],["type","button",1,"btn","btn-sm","btn-primary","py-2","mt-2",3,"click"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,e){1&t&&(h.Pc(0,"form",0),h.Pc(1,"div",1),h.Pc(2,"p",2),h.zd(3),h.Zc(4,"translate"),h.Oc(),h.Pc(5,"div",3),h.Pc(6,"select",4),h.Wc("change",(function(){return e.changePrinterType()})),h.xd(7,Z,3,4,"option",5),h.Oc(),h.xd(8,E,3,3,"button",6),h.Oc(),h.Oc(),h.Pc(9,"div",1),h.Pc(10,"p",2),h.zd(11),h.Zc(12,"translate"),h.Oc(),h.Pc(13,"div",3),h.Kc(14,"input",7),h.xd(15,L,2,1,"div",8),h.Kc(16,"p",9),h.Zc(17,"translate"),h.Oc(),h.Oc(),h.Pc(18,"div",1),h.Pc(19,"p",2),h.zd(20),h.Zc(21,"translate"),h.Oc(),h.Pc(22,"div",3),h.Kc(23,"input",10),h.Kc(24,"p",9),h.Zc(25,"translate"),h.xd(26,B,2,1,"div",8),h.Pc(27,"button",11),h.Wc("click",(function(){return e.cashchanger.emit("connect")})),h.zd(28),h.Zc(29,"translate"),h.Oc(),h.Pc(30,"button",11),h.Wc("click",(function(){return e.cashchanger.emit("endDeposit")})),h.zd(31),h.Zc(32,"translate"),h.Oc(),h.Pc(33,"button",11),h.Wc("click",(function(){return e.cashchanger.emit("readCounts")})),h.zd(34),h.Zc(35,"translate"),h.Oc(),h.Pc(36,"button",11),h.Wc("click",(function(){return e.cashchanger.emit("collectAll")})),h.zd(37),h.Zc(38,"translate"),h.Oc(),h.Pc(39,"button",12),h.Wc("click",(function(){return e.cashchanger.emit("collectPart")})),h.zd(40),h.Zc(41,"translate"),h.Oc(),h.Oc(),h.Oc(),h.Pc(42,"div",1),h.Pc(43,"p",2),h.zd(44),h.Zc(45,"translate"),h.Oc(),h.Pc(46,"div",3),h.Kc(47,"input",13),h.xd(48,q,2,1,"div",8),h.Pc(49,"button",12),h.Wc("click",(function(){return e.payment.emit()})),h.zd(50),h.Zc(51,"translate"),h.Oc(),h.Oc(),h.Oc(),h.Oc()),2&t&&(h.fd("formGroup",e.formGroup),h.wc(3),h.Ad(h.ad(4,24,"setting.device.printer.label")),h.wc(4),h.fd("ngForOf",e.printers),h.wc(1),h.fd("ngIf",e.formGroup.controls.printerType.value&&e.formGroup.controls.printerType.value!==e.connectionType.None),h.wc(3),h.Ad(h.ad(12,26,"setting.device.printer.ipAddress")),h.wc(4),h.fd("ngIf",e.formGroup.controls.printerIpAddress.invalid&&e.formGroup.controls.printerIpAddress.touched),h.wc(1),h.fd("innerHtml",h.ad(17,28,"setting.device.printer.ipAddressDescription"),h.sd),h.wc(4),h.Ad(h.ad(21,30,"setting.device.cashchanger.label")),h.wc(4),h.fd("innerHtml",h.ad(25,32,"setting.device.cashchanger.description"),h.sd),h.wc(2),h.fd("ngIf",e.formGroup.controls.cashchanger.invalid&&e.formGroup.controls.cashchanger.touched),h.wc(1),h.fd("disabled",e.isConnected),h.wc(1),h.Ad(h.ad(29,34,"setting.device.connect")),h.wc(2),h.fd("disabled",e.isConnected),h.wc(1),h.Ad(h.ad(32,36,"setting.device.endDeposit")),h.wc(2),h.fd("disabled",e.isConnected),h.wc(1),h.Ad(h.ad(35,38,"setting.device.readCounts")),h.wc(2),h.fd("disabled",e.isConnected),h.wc(1),h.Ad(h.ad(38,40,"setting.device.collectAll")),h.wc(2),h.fd("disabled",e.isConnected),h.wc(1),h.Ad(h.ad(41,42,"setting.device.collectPart")),h.wc(4),h.Ad(h.ad(45,44,"setting.device.payment.label")),h.wc(4),h.fd("ngIf",e.formGroup.controls.payment.invalid&&e.formGroup.controls.payment.touched),h.wc(1),h.fd("disabled",e.isConnected),h.wc(1),h.Ad(h.ad(51,46,"setting.device.connect")))},directives:[P.s,P.l,P.e,P.p,P.k,P.d,O.b,o.k,o.l,P.a,P.n,P.r],pipes:[m.c],styles:[""]});n("icHh");var R=n("WxsR");class j{transform(t,e,n){e=void 0===e?"JP":e,n=void 0===n?"National":n;const o=R.c(t);return"JP"!==o.country?t:R.a(o,n).replace(/\-/g,"")}}j.\u0275fac=function(t){return new(t||j)},j.\u0275pipe=h.Ic({name:"libphonenumberFormat",type:j,pure:!0});const K=["intlTelInput"];function M(t,e){if(1&t&&(h.Pc(0,"p"),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t){const t=h.Yc().$implicit;h.wc(1),h.Ad(h.ad(2,1,"form.label."+t))}}function _(t,e){if(1&t&&(h.Pc(0,"p"),h.zd(1),h.Zc(2,"changeLanguage"),h.Oc()),2&t){const t=h.Yc().$implicit,e=h.Yc();var n;h.wc(1),h.Bd(" ",h.ad(2,1,null==(n=e.getAdditionalProperty(t))?null:n.label),"")}}function V(t,e){1&t&&(h.Pc(0,"p",15),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd("",h.ad(2,1,"form.required")," "))}function W(t,e){if(1&t&&(h.Kc(0,"input",16),h.Zc(1,"translate")),2&t){const t=h.Yc().$implicit;h.fd("formControlName",t)("id",t)("placeholder",h.ad(1,3,"form.placeholder."+t))}}function H(t,e){if(1&t&&(h.Kc(0,"input",17),h.Zc(1,"translate")),2&t){const t=h.Yc().$implicit;h.fd("formControlName",t)("id",t)("placeholder",h.ad(1,3,"form.placeholder."+t))}}const U=function(t){return[t]},Q=function(t,e){return[t,e]};function X(t,e){if(1&t&&h.Kc(0,"ngx-intl-tel-input",18,19),2&t){const t=h.Yc(2);h.fd("preferredCountries",h.hd(11,U,t.CountryISO.Japan))("enableAutoCountrySelect",!1)("enablePlaceholder",!0)("searchCountryFlag",!0)("searchCountryField",h.id(13,Q,t.SearchCountryField.Iso2,t.SearchCountryField.Name))("selectFirstCountry",!1)("selectedCountryISO",t.CountryISO.Japan)("maxLength",15)("tooltipField",t.TooltipLabel.Name)("phoneValidation",!0)("separateDialCode",!1)}}function tt(t,e){if(1&t&&(h.Pc(0,"option",22),h.zd(1),h.Zc(2,"changeLanguage"),h.Oc()),2&t){const t=e.$implicit;h.fd("value",t.value),h.wc(1),h.Bd(" ",h.ad(2,2,t.label)," ")}}function et(t,e){if(1&t&&(h.Pc(0,"select",20),h.xd(1,tt,3,4,"option",21),h.Oc()),2&t){const t=h.Yc().$implicit;var n;const e=null==(n=h.Yc().getProfileProperty(t))?null:n.option;h.fd("formControlName",t)("id",t),h.wc(1),h.fd("ngForOf",e)}}function nt(t,e){if(1&t&&h.Kc(0,"input",23),2&t){const t=h.Yc().$implicit;h.fd("formControlName",t)("id",t)}}function ot(t,e){if(1&t&&h.Kc(0,"textarea",24),2&t){const t=h.Yc().$implicit;h.fd("formControlName",t)("id",t)}}function rt(t,e){if(1&t&&(h.Pc(0,"option",22),h.zd(1),h.Zc(2,"changeLanguage"),h.Oc()),2&t){const t=e.$implicit;h.fd("value",t.value),h.wc(1),h.Bd(" ",h.ad(2,2,t.label)," ")}}function it(t,e){if(1&t&&(h.Pc(0,"select",24),h.xd(1,rt,3,4,"option",21),h.Oc()),2&t){const t=h.Yc().$implicit;var n;const e=null==(n=h.Yc().getAdditionalProperty(t))?null:n.option;h.fd("formControlName",t)("id",t),h.wc(1),h.fd("ngForOf",e)}}function ct(t,e){1&t&&(h.Pc(0,"p",27),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd(" ",h.ad(2,1,"form.validation.required")," "))}const at=function(t){return{value:t}};function st(t,e){if(1&t&&(h.Pc(0,"p",27),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t){const t=h.Yc(2).$implicit,e=h.Yc();h.wc(1),h.Bd(" ",h.bd(2,1,"form.validation.maxlength",h.hd(4,at,null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.maxlength.requiredLength))," ")}}function lt(t,e){if(1&t&&(h.Pc(0,"p",27),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t){const t=h.Yc(2).$implicit,e=h.Yc();h.wc(1),h.Bd(" ",h.bd(2,1,"form.validation.minlength",h.hd(4,at,null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.minlength.requiredLength))," ")}}function dt(t,e){1&t&&(h.Pc(0,"p",27),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd(" ",h.ad(2,1,"form.validation.email")," "))}function pt(t,e){1&t&&(h.Pc(0,"p",27),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd(" ",h.ad(2,1,"form.validation.telephone")," "))}function ut(t,e){1&t&&(h.Pc(0,"p",27),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd(" ",h.ad(2,1,"form.validation.fullKana"),""))}function ft(t,e){1&t&&(h.Pc(0,"p",27),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd(" ",h.ad(2,1,"form.validation.lowercaseLetters"),""))}function ht(t,e){if(1&t&&(h.Pc(0,"div"),h.xd(1,ut,3,3,"p",26),h.xd(2,ft,3,3,"p",26),h.Oc()),2&t){const t=h.Yc(2).$implicit,e=h.Yc();h.wc(1),h.fd("ngIf","ja"===e.language&&(null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.customPattern)),h.wc(1),h.fd("ngIf","ja"!==e.language&&(null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.customPattern))}}function mt(t,e){1&t&&(h.Pc(0,"p",27),h.zd(1),h.Zc(2,"translate"),h.Oc()),2&t&&(h.wc(1),h.Bd(" ",h.ad(2,1,"form.validation.pattern")," "))}function gt(t,e){if(1&t&&(h.Pc(0,"div",25),h.xd(1,ct,3,3,"p",26),h.xd(2,st,3,6,"p",26),h.xd(3,lt,3,6,"p",26),h.xd(4,dt,3,3,"p",26),h.xd(5,pt,3,3,"p",26),h.xd(6,ht,3,2,"div",5),h.xd(7,mt,3,3,"p",26),h.Oc()),2&t){const t=h.Yc().$implicit,e=h.Yc();h.wc(1),h.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.required),h.wc(1),h.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.maxlength),h.wc(1),h.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.minlength),h.wc(1),h.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.email),h.wc(1),h.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.validatePhoneNumber),h.wc(1),h.fd("ngIf","familyName"===t||"givenName"===t),h.wc(1),h.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.pattern)}}function vt(t,e){if(1&t&&(h.Pc(0,"div",2),h.Pc(1,"div",3),h.Pc(2,"div",4),h.xd(3,M,3,3,"p",5),h.xd(4,_,3,3,"p",5),h.xd(5,V,3,3,"p",6),h.Oc(),h.Oc(),h.Pc(6,"div",7),h.xd(7,W,2,5,"input",8),h.xd(8,H,2,5,"input",9),h.xd(9,X,2,16,"ngx-intl-tel-input",10),h.xd(10,et,2,3,"select",11),h.xd(11,nt,1,2,"input",12),h.xd(12,ot,1,2,"textarea",13),h.xd(13,it,2,3,"select",13),h.xd(14,gt,8,7,"div",14),h.Oc(),h.Oc()),2&t){const t=e.$implicit,i=h.Yc();var n=null;const c=i.getAdditionalProperty(t)&&"input"===(null==(n=i.getAdditionalProperty(t))?null:n.inputType);var o=null;const a=i.getAdditionalProperty(t)&&"textarea"===(null==(o=i.getAdditionalProperty(t))?null:o.inputType);var r=null;const s=i.getAdditionalProperty(t)&&"select"===(null==(r=i.getAdditionalProperty(t))?null:r.inputType);h.wc(3),h.fd("ngIf",!i.getAdditionalProperty(t)),h.wc(1),h.fd("ngIf",i.getAdditionalProperty(t)),h.wc(1),h.fd("ngIf",i.isRequired(t)),h.wc(2),h.fd("ngIf","email"!==t&&"telephone"!==t&&"gender"!==t&&!i.getAdditionalProperty(t)),h.wc(1),h.fd("ngIf","email"===t),h.wc(1),h.fd("ngIf","telephone"===t),h.wc(1),h.fd("ngIf","gender"===t),h.wc(1),h.fd("ngIf",c),h.wc(1),h.fd("ngIf",a),h.wc(1),h.fd("ngIf",s),h.wc(1),h.fd("ngIf",i.formGroup.controls[t].invalid&&i.formGroup.controls[t].touched)}}class yt{constructor(t,e){this.translate=t,this.formBuilder=e,this.environment=Object(d.a)(),this.SearchCountryField=O.e,this.TooltipLabel=O.f,this.CountryISO=O.a,this.valueChanges=new h.w}ngOnInit(){this.formGroup=this.createForm(),this.valueChanges.emit(this.formGroup),this.subscription=this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit(this.formGroup)}),setTimeout(()=>{if(void 0===this.intlTelInput)return;const t=this.intlTelInput.allCountries.find(t=>t.iso2===O.a.Japan);void 0!==t&&(t.placeHolder=this.translate.instant("form.placeholder.telephone"))},0)}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}createForm(){const t=this.environment.PROFILE,e=this.formBuilder.group({});if(t.forEach(t=>{const n=[];void 0!==t.required&&t.required&&n.push(P.q.required),void 0!==t.maxLength&&n.push(P.q.maxLength(t.maxLength)),void 0!==t.minLength&&n.push(P.q.minLength(t.minLength)),void 0!==t.pattern&&n.push(P.q.pattern(t.pattern)),"familyName"!==t.key&&"givenName"!==t.key||n.push(e=>{const n=e.root.get(t.key),o=document.documentElement.lang;if(null!==n){if(""===n.value)return null;if("ja"===o&&!new RegExp(/^[\u30a1-\u30f6\u30fc]+$/).test(n.value))return{customPattern:!0};if("ja"!==o&&!new RegExp(/^[a-z]+$/).test(n.value))return{customPattern:!0}}return null}),"email"===t.key&&n.push(P.q.email),e.addControl(t.key,new P.c(t.value,n))}),void 0===this.profile)return e;Object.keys(this.profile).forEach(t=>{const n=this.profile[t];void 0!==n&&void 0!==e.controls[t]&&("telephone"!==t?e.controls[t].setValue(n):e.controls.telephone.setValue((new j).transform(n)))});const n=this.profile.additionalProperty;return void 0!==n&&n.forEach(t=>{const n="additionalProperty."+t.name,o=t.value;void 0!==o&&void 0!==e.controls[n]&&e.controls[n].setValue(o)}),e}isRequired(t){return void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.formGroup.controls)}getProfileProperty(t){return this.environment.PROFILE.find(e=>e.key===t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}copyDomain(){const t=this.translate.instant("email.domain"),e=document.createElement("textarea");e.value=t,e.selectionStart=0,e.selectionEnd=e.value.length,document.body.appendChild(e),e.focus(),document.execCommand("copy"),e.blur(),document.body.removeChild(e)}}yt.\u0275fac=function(t){return new(t||yt)(h.Jc(m.d),h.Jc(P.b))},yt.\u0275cmp=h.Dc({type:yt,selectors:[["app-input-customer"]],viewQuery:function(t,e){var n;(1&t&&h.Ed(K,!0),2&t)&&(h.nd(n=h.Xc())&&(e.intlTelInput=n.first))},inputs:{profile:"profile",language:"language"},outputs:{valueChanges:"valueChanges"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-group row align-items-center",4,"ngFor","ngForOf"],[1,"form-group","row","align-items-center"],[1,"col-md-4","py-2","text-md-right"],[1,"d-inline-flex","align-items-center"],[4,"ngIf"],["class","badge badge-danger ml-2",4,"ngIf"],[1,"col-md-8"],["type","text","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["type","email","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode",4,"ngIf"],["class","form-control",3,"formControlName","id",4,"ngIf"],["type","text","class","form-control","placeholder","",3,"formControlName","id",4,"ngIf"],["class","form-control","placeholder","",3,"formControlName","id",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"badge","badge-danger","ml-2"],["type","text",1,"form-control",3,"formControlName","id","placeholder"],["type","email",1,"form-control",3,"formControlName","id","placeholder"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode"],["intlTelInput",""],[1,"form-control",3,"formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","",1,"form-control",3,"formControlName","id"],["placeholder","",1,"form-control",3,"formControlName","id"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,e){1&t&&(h.Pc(0,"form",0),h.xd(1,vt,15,11,"div",1),h.Oc()),2&t&&(h.fd("formGroup",e.formGroup),h.wc(1),h.fd("ngForOf",e.getProfileFormKeys()))},directives:[P.s,P.l,P.e,o.k,o.l,P.a,P.k,P.d,O.b,O.c,P.p,P.n,P.r],pipes:[m.c,b.a],styles:["input[_ngcontent-%COMP%], ngx-intl-tel-input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{display:block;width:75%}@media (max-width:767.98px){input[_ngcontent-%COMP%], ngx-intl-tel-input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{min-height:5rem}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}"]});var Pt=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function c(t){try{s(o.next(t))}catch(e){i(e)}}function a(t){try{s(o.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}s((o=o.apply(t,e||[])).next())}))};function Ot(t,e){if(1&t){const t=h.Qc();h.Pc(0,"app-input-app",17),h.Wc("valueChanges",(function(e){h.rd(t);return h.Yc().appForm=e})),h.Oc()}if(2&t){const t=h.Yc();h.fd("theaters",t.theaters)("data",null==t.inputData?null:t.inputData.app)}}function bt(t,e){if(1&t){const t=h.Qc();h.Pc(0,"app-input-device",18),h.Wc("valueChanges",(function(e){h.rd(t);return h.Yc().deviceForm=e}))("print",(function(){h.rd(t);return h.Yc().print()}))("payment",(function(){h.rd(t);return h.Yc().payment()}))("cashchanger",(function(e){h.rd(t);return h.Yc().cashchanger(e)})),h.Oc()}if(2&t){const t=h.Yc();h.fd("data",null==t.inputData?null:t.inputData.device)("isConnected",t.epsonEPOSService.cashchanger.isConnected())}}function wt(t,e){if(1&t){const t=h.Qc();h.Pc(0,"app-input-customer",19),h.Wc("valueChanges",(function(e){h.rd(t);return h.Yc().profileForm=e})),h.Zc(1,"async"),h.Oc()}if(2&t){const t=h.Yc();var n;const e=null==(n=h.ad(1,2,t.user))?null:n.language;h.fd("profile",t.inputData.profile)("language",e)}}class Ct{constructor(t,e,n,o,r,i,c,a,s,l){this.epsonEPOSService=t,this.store=e,this.utilService=n,this.actionService=o,this.masterService=r,this.translate=i,this.router=c,this.paymentService=a,this.cinerinoService=s,this.modal=l,this.environment=Object(d.a)()}ngOnInit(){return Pt(this,void 0,void 0,(function*(){this.user=this.store.pipe(Object(a.m)(u.g)),this.error=this.store.pipe(Object(a.m)(u.a)),this.isLoading=this.store.pipe(Object(a.m)(u.b)),this.posList=[],this.theaters=[];try{this.theaters=yield this.masterService.searchMovieTheaters();const{theater:t,pos:e,applicationType:n,applicationPassword:o,printer:r,cashchanger:i,payment:c,customerContact:a}=yield this.actionService.user.getData();this.inputData={app:{theater:t,pos:e,applicationType:n,applicationPassword:o},device:{printerType:null==r?void 0:r.connectionType,printerIpAddress:null==r?void 0:r.ipAddress,cashchanger:i,payment:c},profile:a}}catch(t){console.error(t),this.router.navigate(["/error"])}try{const{cashchanger:t}=yield this.actionService.user.getData();void 0!==t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:t}),yield this.epsonEPOSService.cashchanger.endDeposit({endDepositType:"DEPOSIT_REPAY"}),yield this.epsonEPOSService.cashchanger.disconnect())}catch(t){console.error(t)}}))}onSubmit(){return Pt(this,void 0,void 0,(function*(){if(Object.keys(this.appForm.controls).forEach(t=>{this.appForm.controls[t].markAsTouched()}),Object.keys(this.deviceForm.controls).forEach(t=>{this.deviceForm.controls[t].markAsTouched()}),Object.keys(this.profileForm.controls).forEach(t=>{this.profileForm.controls[t].markAsTouched()}),this.appForm.invalid||this.deviceForm.invalid||this.profileForm.invalid)this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("setting.alert.validation")});else try{const t=this.appForm.controls.theaterId.value,e=this.appForm.controls.posId.value,n=this.theaters.find(e=>e.id===t);if(void 0===n)throw new Error("theater not found");const o=void 0===n.hasPOS?n.hasPOS:n.hasPOS.find(t=>t.id===e);this.actionService.user.updateAll({pos:o,theater:n,profile:{familyName:void 0===this.profileForm.controls.familyName?void 0:this.profileForm.controls.familyName.value,givenName:void 0===this.profileForm.controls.givenName?void 0:this.profileForm.controls.givenName.value,email:void 0===this.profileForm.controls.email?void 0:this.profileForm.controls.email.value,telephone:void 0===this.profileForm.controls.telephone?void 0:this.profileForm.controls.telephone.value.e164Number,age:void 0===this.profileForm.controls.age?void 0:this.profileForm.controls.age.value,address:void 0===this.profileForm.controls.address?void 0:this.profileForm.controls.address.value,gender:void 0===this.profileForm.controls.gender?void 0:this.profileForm.controls.gender.value},printer:{ipAddress:this.deviceForm.controls.printerIpAddress.value,connectionType:this.deviceForm.controls.printerType.value},cashchanger:void 0===this.deviceForm.controls.cashchanger.value?void 0:this.deviceForm.controls.cashchanger.value,payment:void 0===this.deviceForm.controls.payment.value?void 0:this.deviceForm.controls.payment.value,applicationType:this.appForm.controls.applicationType.value,applicationPassword:this.appForm.controls.applicationPassword.value}),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.success")})}catch(t){console.error(t)}}))}print(){return Pt(this,void 0,void 0,(function*(){const t={connectionType:this.deviceForm.controls.printerType.value,ipAddress:this.deviceForm.controls.printerIpAddress.value};try{yield this.actionService.order.print({orders:[],printer:t})}catch(e){console.error(e),this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <p class="mb-4">${this.translate.instant("setting.alert.print")}</p>\n                    <div class="p-3 bg-light-gray select-text">\n                    <code>${"{}"===JSON.stringify(e)?e:JSON.stringify(e)}</code>\n                </div>`})}}))}cashchanger(t){return Pt(this,void 0,void 0,(function*(){try{const e=this.deviceForm.controls.cashchanger.value;if("connect"===t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:e}),yield this.epsonEPOSService.cashchanger.disconnect(),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.connection")})),"endDeposit"===t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:e}),yield this.epsonEPOSService.cashchanger.endDeposit({endDepositType:"DEPOSIT_REPAY"}),yield this.epsonEPOSService.cashchanger.disconnect()),"readCounts"===t){yield this.epsonEPOSService.cashchanger.init({ipAddress:e});const t=yield this.epsonEPOSService.cashchanger.readCounts();yield this.epsonEPOSService.cashchanger.disconnect(),console.log("counts",t),this.modal.show(f.a,{initialState:{counts:t},class:"modal-dialog-centered modal-lg"})}"collectAll"!==t&&"collectPart"!==t||this.utilService.openConfirm({title:this.translate.instant("common.confirm"),body:this.translate.instant("setting.confirm.collect"),cb:()=>Pt(this,void 0,void 0,(function*(){try{const n="collectAll"===t?"ALL_CASH":"PART_OF_CASH";yield this.epsonEPOSService.cashchanger.init({ipAddress:e}),yield this.epsonEPOSService.cashchanger.collect({collectType:n}),yield this.epsonEPOSService.cashchanger.disconnect()}catch(n){console.error(n),this.utilService.openAlert({title:this.translate.instant("common.error"),body:"",error:"{}"===JSON.stringify(n)?n:JSON.stringify(n)})}}))})}catch(e){console.error(e),this.utilService.openAlert({title:this.translate.instant("common.error"),body:"",error:"{}"===JSON.stringify(e)?e:JSON.stringify(e)})}}))}payment(){return Pt(this,void 0,void 0,(function*(){try{const t=this.deviceForm.controls.payment.value;yield this.paymentService.init({ipAddress:t});const e=yield this.paymentService.exec({func:l.b.Purchase.Payment.FUNC_CODE.TERMINAL.COMMUNICATION});console.log(e),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.connection")})}catch(t){console.error(t);const e=void 0===t.message?t:t.message;this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <div class="p-3 bg-light-gray select-text">\n                    <code>${e}</code>\n                </div>`})}}))}signOut(){return Pt(this,void 0,void 0,(function*(){try{yield this.cinerinoService.getServices(),yield this.cinerinoService.signOut()}catch(t){console.error(t)}}))}}Ct.\u0275fac=function(t){return new(t||Ct)(h.Jc(p.c),h.Jc(a.b),h.Jc(p.f),h.Jc(p.a),h.Jc(p.d),h.Jc(m.d),h.Jc(i.b),h.Jc(p.e),h.Jc(p.b),h.Jc(s.b))},Ct.\u0275cmp=h.Dc({type:Ct,selectors:[["app-setting"]],decls:36,vars:28,consts:[[3,"title"],[1,"contents"],[1,"container","h-100","px-3","pb-3"],[1,"row","h-100"],[1,"col-2","h-100"],[1,"col-8","h-100","scroll-horizontal"],[1,"text-large","font-weight-bold","bg-light-gray","border-left","border-white-bold","border-primary","p-3","mb-4"],[3,"theaters","data","valueChanges",4,"ngIf"],[3,"data","isConnected","valueChanges","print","payment","cashchanger",4,"ngIf"],[3,"profile","language","valueChanges",4,"ngIf"],[1,"col-2"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"container","h-100"],[1,"row","align-items-center","justify-content-center","h-100"],[1,"col-3"],["type","button",1,"btn","btn-outline-light","btn-block","font-weight-bold","py-2",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","font-weight-bold","py-2",3,"disabled","click"],[3,"theaters","data","valueChanges"],[3,"data","isConnected","valueChanges","print","payment","cashchanger"],[3,"profile","language","valueChanges"]],template:function(t,e){1&t&&(h.Kc(0,"app-header"),h.Kc(1,"app-page-title",0),h.Zc(2,"translate"),h.Pc(3,"div",1),h.Pc(4,"div",2),h.Pc(5,"div",3),h.Kc(6,"div",4),h.Pc(7,"div",5),h.Pc(8,"p",6),h.zd(9),h.Zc(10,"translate"),h.Oc(),h.xd(11,Ot,1,2,"app-input-app",7),h.Pc(12,"p",6),h.zd(13),h.Zc(14,"translate"),h.Oc(),h.xd(15,bt,1,2,"app-input-device",8),h.Pc(16,"p",6),h.zd(17),h.Zc(18,"translate"),h.Oc(),h.xd(19,wt,2,4,"app-input-customer",9),h.Oc(),h.Pc(20,"div",10),h.Pc(21,"button",11),h.Wc("click",(function(){return e.signOut()})),h.zd(22),h.Zc(23,"translate"),h.Oc(),h.Oc(),h.Oc(),h.Oc(),h.Oc(),h.Pc(24,"app-footer"),h.Pc(25,"div",12),h.Pc(26,"div",13),h.Pc(27,"div",14),h.Pc(28,"button",15),h.zd(29),h.Zc(30,"translate"),h.Oc(),h.Oc(),h.Pc(31,"div",14),h.Pc(32,"button",16),h.Wc("click",(function(){return e.onSubmit()})),h.Zc(33,"async"),h.zd(34),h.Zc(35,"translate"),h.Oc(),h.Oc(),h.Oc(),h.Oc(),h.Oc()),2&t&&(h.wc(1),h.gd("title",h.ad(2,12,"setting.title")),h.wc(8),h.Bd(" ",h.ad(10,14,"setting.application.title")," "),h.wc(2),h.fd("ngIf",null==e.inputData?null:e.inputData.app),h.wc(2),h.Bd(" ",h.ad(14,16,"setting.device.title")," "),h.wc(2),h.fd("ngIf",null==e.inputData?null:e.inputData.device),h.wc(2),h.Bd(" ",h.ad(18,18,"setting.basic.title")," "),h.wc(2),h.fd("ngIf",e.inputData),h.wc(3),h.Ad(h.ad(23,20,"setting.signOut")),h.wc(6),h.fd("routerLink",e.environment.BASE_URL),h.wc(1),h.Ad(h.ad(30,22,"setting.prev")),h.wc(3),h.fd("disabled",h.ad(33,24,e.isLoading)),h.wc(2),h.Ad(h.ad(35,26,"setting.next")))},directives:[g.a,v.a,o.l,y.a,i.c,Y,J,yt],pipes:[m.c,o.b],styles:[""]});const It=[{path:"",component:c.a,children:[{path:"",component:Ct}]}];class xt{}xt.\u0275mod=h.Hc({type:xt}),xt.\u0275inj=h.Gc({factory:function(t){return new(t||xt)},imports:[[i.d.forChild(It)],i.d]});class Ft{}Ft.\u0275mod=h.Hc({type:Ft}),Ft.\u0275inj=h.Gc({factory:function(t){return new(t||Ft)},imports:[[o.c,xt,r.a]]})}}]);