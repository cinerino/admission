(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{AL2A:function(t,e,n){"use strict";n.r(e),n.d(e,"SettingModule",(function(){return Ct}));var r=n("2kYt"),o=n("DSWM"),i=n("sEIs"),c=n("RRjC"),a=n("sN6X"),s=n("x8Mb"),l=n("PIN6"),d=n("cHUu"),p=n("mOXJ"),u=n("EM62"),f=n("s2Ay"),m=n("cc8N"),h=n("KLHf"),g=n("us+Q"),v=n("nIj0"),y=n("ddJ1"),P=n("OSFB");function O(t,e){if(1&t&&(u.Pc(0,"p"),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t){const t=u.Yc(2).$implicit;u.wc(1),u.Bd(" ",u.ad(2,1,"form.label."+t)," ")}}function b(t,e){1&t&&(u.Pc(0,"p"),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"setting.application.applicationType.label")," "))}function w(t,e){1&t&&(u.Pc(0,"p",11),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd("",u.ad(2,1,"form.required")," "))}function C(t,e){if(1&t&&(u.Pc(0,"option",15),u.zd(1),u.Zc(2,"changeLanguage"),u.Oc()),2&t){const t=e.$implicit;u.fd("value",t.id),u.wc(1),u.Bd(" ",u.ad(2,2,t.name),"")}}function I(t,e){if(1&t){const t=u.Qc();u.Pc(0,"select",12),u.Wc("change",(function(){u.rd(t);return u.Yc(3).changeTheater()})),u.Pc(1,"option",13),u.zd(2),u.Zc(3,"translate"),u.Oc(),u.xd(4,C,3,4,"option",14),u.Oc()}if(2&t){const t=u.Yc(2).$implicit,e=u.Yc();u.fd("formControlName",t),u.wc(2),u.Ad(u.ad(3,3,"setting.unselected")),u.wc(2),u.fd("ngForOf",e.theaters)}}function x(t,e){if(1&t&&(u.Pc(0,"option",15),u.zd(1),u.Oc()),2&t){const t=e.$implicit;u.fd("value",t.id),u.wc(1),u.Ad(t.name)}}function F(t,e){if(1&t&&(u.Pc(0,"select",16),u.Pc(1,"option",13),u.zd(2),u.Zc(3,"translate"),u.Oc(),u.xd(4,x,2,2,"option",14),u.Oc()),2&t){const t=u.Yc(2).$implicit,e=u.Yc();u.fd("formControlName",t),u.wc(2),u.Ad(u.ad(3,3,"setting.unselected")),u.wc(2),u.fd("ngForOf",e.posList)}}function A(t,e){if(1&t&&(u.Pc(0,"select",16),u.Pc(1,"option",15),u.zd(2),u.Zc(3,"translate"),u.Oc(),u.Pc(4,"option",15),u.zd(5),u.Zc(6,"translate"),u.Oc(),u.Oc()),2&t){const t=u.Yc(2).$implicit,e=u.Yc();u.fd("formControlName",t),u.wc(1),u.fd("value",e.applicationType.Tvm),u.wc(1),u.Bd(" ",u.ad(3,5,"setting.application.applicationType.option.tvm")," "),u.wc(2),u.fd("value",e.applicationType.Printer),u.wc(1),u.Bd(" ",u.ad(6,7,"setting.application.applicationType.option.printer")," ")}}function G(t,e){if(1&t&&(u.Pc(0,"div",3),u.Pc(1,"div",4),u.Pc(2,"div",5),u.xd(3,O,3,3,"p",6),u.xd(4,b,3,3,"p",6),u.xd(5,w,3,3,"p",7),u.Oc(),u.Oc(),u.Pc(6,"div",8),u.xd(7,I,5,5,"select",9),u.xd(8,F,5,5,"select",10),u.xd(9,A,7,9,"select",10),u.Oc(),u.Oc()),2&t){const t=u.Yc().$implicit,e=u.Yc();u.wc(3),u.fd("ngIf","applicationType"!==t),u.wc(1),u.fd("ngIf","applicationType"===t),u.wc(1),u.fd("ngIf",e.isRequired(t)),u.wc(2),u.fd("ngIf","theaterBranchCode"===t),u.wc(1),u.fd("ngIf","posId"===t),u.wc(1),u.fd("ngIf","applicationType"===t)}}function S(t,e){if(1&t&&(u.Nc(0),u.xd(1,G,10,6,"div",2),u.Mc()),2&t){const t=e.$implicit,n=u.Yc();u.wc(1),u.fd("ngIf",!("posId"===t&&0===n.posList.length))}}class T{constructor(t){this.formBuilder=t,this.environment=Object(l.a)(),this.applicationType=s.b.Util.Application.ApplicationType,this.valueChanges=new u.w}ngOnInit(){this.posList=[],this.formGroup=this.createForm();const{theater:t,pos:e,applicationType:n}=this.data;void 0!==t&&(this.formGroup.controls.theaterBranchCode.setValue(t.id),this.changeTheater()),void 0!==e&&this.formGroup.controls.posId.setValue(e.id),void 0!==n&&this.formGroup.controls.applicationType.setValue(n),this.valueChanges.emit(this.formGroup),this.subscription=this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit(this.formGroup)})}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}createForm(){return this.formBuilder.group({theaterBranchCode:["",[v.r.required]],posId:[""],applicationType:[""]})}isRequired(t){return"theaterBranchCode"===t||void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.formGroup.controls)}getProfileProperty(t){return this.environment.PROFILE.find(e=>e.key===t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}changeTheater(){this.formGroup.controls.posId.setValue("");const t=this.formGroup.controls.theaterBranchCode.value,e=this.theaters.find(e=>e.id===t);this.posList=""!==t&&void 0!==e?void 0===e.hasPOS?[]:e.hasPOS:[]}}function N(t,e){if(1&t&&(u.Pc(0,"option",14),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t){const t=e.$implicit;u.fd("value",t.connectionType),u.wc(1),u.Bd(" ",u.ad(2,2,t.name),"")}}function k(t,e){if(1&t){const t=u.Qc();u.Pc(0,"button",15),u.Wc("click",(function(){u.rd(t);return u.Yc().print.emit()})),u.zd(1),u.Zc(2,"translate"),u.Oc()}2&t&&(u.wc(1),u.Ad(u.ad(2,1,"setting.device.printer.testPrinting")))}function Y(t,e){1&t&&(u.Pc(0,"p",18),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"form.validation.required"),""))}function Z(t,e){if(1&t&&(u.Pc(0,"div",16),u.xd(1,Y,3,3,"p",17),u.Oc()),2&t){const t=u.Yc();u.wc(1),u.fd("ngIf",null==t.formGroup.controls.printerIpAddress.errors?null:t.formGroup.controls.printerIpAddress.errors.required)}}function z(t,e){1&t&&(u.Pc(0,"p",18),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"form.validation.required"),""))}function B(t,e){if(1&t&&(u.Pc(0,"div",16),u.xd(1,z,3,3,"p",17),u.Oc()),2&t){const t=u.Yc();u.wc(1),u.fd("ngIf",null==t.formGroup.controls.cashchanger.errors?null:t.formGroup.controls.cashchanger.errors.required)}}function E(t,e){1&t&&(u.Pc(0,"p",18),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"form.validation.required"),""))}function L(t,e){if(1&t&&(u.Pc(0,"div",16),u.xd(1,E,3,3,"p",17),u.Oc()),2&t){const t=u.Yc();u.wc(1),u.fd("ngIf",null==t.formGroup.controls.payment.errors?null:t.formGroup.controls.payment.errors.required)}}T.\u0275fac=function(t){return new(t||T)(u.Jc(v.b))},T.\u0275cmp=u.Dc({type:T,selectors:[["app-input-app"]],inputs:{data:"data",theaters:"theaters"},outputs:{valueChanges:"valueChanges"},decls:2,vars:2,consts:[[3,"formGroup"],[4,"ngFor","ngForOf"],["class","form-group row align-items-center",4,"ngIf"],[1,"form-group","row","align-items-center"],[1,"col-4","py-2","text-right"],[1,"d-inline-flex","align-items-center"],[4,"ngIf"],["class","badge badge-danger ml-2",4,"ngIf"],[1,"col-8"],["class","form-control",3,"formControlName","change",4,"ngIf"],["class","form-control",3,"formControlName",4,"ngIf"],[1,"badge","badge-danger","ml-2"],[1,"form-control",3,"formControlName","change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"form-control",3,"formControlName"]],template:function(t,e){1&t&&(u.Pc(0,"form",0),u.xd(1,S,2,1,"ng-container",1),u.Oc()),2&t&&(u.fd("formGroup",e.formGroup),u.wc(1),u.fd("ngForOf",e.getProfileFormKeys()))},directives:[v.t,v.l,v.e,r.k,r.l,v.q,v.k,v.d,y.b,v.o,v.s],pipes:[f.c,P.a],styles:[""]});class D{constructor(t,e){this.formBuilder=t,this.translate=e,this.environment=Object(l.a)(),this.connectionType=s.b.Util.Printer.ConnectionType,this.printers=s.b.Util.Printer.printers,this.valueChanges=new u.w,this.print=new u.w,this.payment=new u.w,this.cashchanger=new u.w}ngOnInit(){this.formGroup=this.createForm();const{printerType:t,printerIpAddress:e,cashchanger:n,payment:r}=this.data;void 0!==t&&(this.formGroup.controls.printerType.setValue(t),this.formGroup.controls.printerIpAddress.setValue(e)),void 0!==n&&this.formGroup.controls.cashchanger.setValue(n),void 0!==r&&this.formGroup.controls.payment.setValue(r),this.valueChanges.emit(this.formGroup),this.subscription=this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit(this.formGroup)})}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}createForm(){return this.formBuilder.group({printerType:[s.b.Util.Printer.ConnectionType.None],printerIpAddress:[""],cashchanger:[""],payment:[""]})}isRequired(t){return void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.formGroup.controls)}getProfileProperty(t){return this.environment.PROFILE.find(e=>e.key===t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}changePrinterType(){this.formGroup.controls.printerType.value===s.b.Util.Printer.ConnectionType.StarBluetooth&&this.formGroup.controls.printerIpAddress.setValue(this.translate.instant("setting.starBluetoothAddress"))}}D.\u0275fac=function(t){return new(t||D)(u.Jc(v.b),u.Jc(f.d))},D.\u0275cmp=u.Dc({type:D,selectors:[["app-input-device"]],inputs:{data:"data"},outputs:{valueChanges:"valueChanges",print:"print",payment:"payment",cashchanger:"cashchanger"},decls:43,vars:33,consts:[[3,"formGroup"],[1,"form-group","row"],[1,"col-4","text-right","py-3"],[1,"col-8"],["formControlName","printerType",1,"form-control",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","button","class","btn btn-sm btn-primary py-2 mt-2",3,"click",4,"ngIf"],["type","text","formControlName","printerIpAddress","placeholder","0.0.0.0",1,"form-control"],["class","mt-2",4,"ngIf"],[1,"text-small","mt-2",3,"innerHtml"],["type","text","formControlName","cashchanger","placeholder","0.0.0.0",1,"form-control"],["type","button",1,"btn","btn-primary","mt-2","mr-2",3,"click"],["type","button",1,"btn","btn-primary","mt-2",3,"click"],["type","text","formControlName","payment","placeholder","0.0.0.0",1,"form-control"],[3,"value"],["type","button",1,"btn","btn-sm","btn-primary","py-2","mt-2",3,"click"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,e){1&t&&(u.Pc(0,"form",0),u.Pc(1,"div",1),u.Pc(2,"p",2),u.zd(3),u.Zc(4,"translate"),u.Oc(),u.Pc(5,"div",3),u.Pc(6,"select",4),u.Wc("change",(function(){return e.changePrinterType()})),u.xd(7,N,3,4,"option",5),u.Oc(),u.xd(8,k,3,3,"button",6),u.Oc(),u.Oc(),u.Pc(9,"div",1),u.Pc(10,"p",2),u.zd(11),u.Zc(12,"translate"),u.Oc(),u.Pc(13,"div",3),u.Kc(14,"input",7),u.xd(15,Z,2,1,"div",8),u.Kc(16,"p",9),u.Zc(17,"translate"),u.Oc(),u.Oc(),u.Pc(18,"div",1),u.Pc(19,"p",2),u.zd(20),u.Zc(21,"translate"),u.Oc(),u.Pc(22,"div",3),u.Kc(23,"input",10),u.Kc(24,"p",9),u.Zc(25,"translate"),u.xd(26,B,2,1,"div",8),u.Pc(27,"button",11),u.Wc("click",(function(){return e.cashchanger.emit("connect")})),u.zd(28),u.Zc(29,"translate"),u.Oc(),u.Pc(30,"button",12),u.Wc("click",(function(){return e.cashchanger.emit("endDeposit")})),u.zd(31),u.Zc(32,"translate"),u.Oc(),u.Oc(),u.Oc(),u.Pc(33,"div",1),u.Pc(34,"p",2),u.zd(35),u.Zc(36,"translate"),u.Oc(),u.Pc(37,"div",3),u.Kc(38,"input",13),u.xd(39,L,2,1,"div",8),u.Pc(40,"button",12),u.Wc("click",(function(){return e.payment.emit()})),u.zd(41),u.Zc(42,"translate"),u.Oc(),u.Oc(),u.Oc(),u.Oc()),2&t&&(u.fd("formGroup",e.formGroup),u.wc(3),u.Ad(u.ad(4,15,"setting.device.printer.label")),u.wc(4),u.fd("ngForOf",e.printers),u.wc(1),u.fd("ngIf",e.formGroup.controls.printerType.value&&e.formGroup.controls.printerType.value!==e.connectionType.None),u.wc(3),u.Ad(u.ad(12,17,"setting.device.printer.ipAddress")),u.wc(4),u.fd("ngIf",e.formGroup.controls.printerIpAddress.invalid&&e.formGroup.controls.printerIpAddress.touched),u.wc(1),u.fd("innerHtml",u.ad(17,19,"setting.device.printer.ipAddressDescription"),u.sd),u.wc(4),u.Ad(u.ad(21,21,"setting.device.cashchanger.label")),u.wc(4),u.fd("innerHtml",u.ad(25,23,"setting.device.cashchanger.description"),u.sd),u.wc(2),u.fd("ngIf",e.formGroup.controls.cashchanger.invalid&&e.formGroup.controls.cashchanger.touched),u.wc(2),u.Ad(u.ad(29,25,"setting.device.connect")),u.wc(3),u.Ad(u.ad(32,27,"setting.device.endDeposit")),u.wc(4),u.Ad(u.ad(36,29,"setting.device.payment.label")),u.wc(4),u.fd("ngIf",e.formGroup.controls.payment.invalid&&e.formGroup.controls.payment.touched),u.wc(2),u.Ad(u.ad(42,31,"setting.device.connect")))},directives:[v.t,v.l,v.e,v.q,v.k,v.d,y.b,r.k,r.l,v.a,v.o,v.s],pipes:[f.c],styles:[""]});n("icHh");var $=n("WxsR");class q{transform(t,e,n){e=void 0===e?"JP":e,n=void 0===n?"National":n;const r=$.c(t);return"JP"!==r.country?t:$.a(r,n).replace(/\-/g,"")}}q.\u0275fac=function(t){return new(t||q)},q.\u0275pipe=u.Ic({name:"libphonenumberFormat",type:q,pure:!0});const J=["intlTelInput"];function R(t,e){if(1&t&&(u.Pc(0,"p"),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t){const t=u.Yc().$implicit;u.wc(1),u.Ad(u.ad(2,1,"form.label."+t))}}function j(t,e){if(1&t&&(u.Pc(0,"p"),u.zd(1),u.Zc(2,"changeLanguage"),u.Oc()),2&t){const t=u.Yc().$implicit,e=u.Yc();var n;u.wc(1),u.Bd(" ",u.ad(2,1,null==(n=e.getAdditionalProperty(t))?null:n.label),"")}}function K(t,e){1&t&&(u.Pc(0,"p",15),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd("",u.ad(2,1,"form.required")," "))}function M(t,e){if(1&t&&(u.Kc(0,"input",16),u.Zc(1,"translate")),2&t){const t=u.Yc().$implicit;u.fd("formControlName",t)("id",t)("placeholder",u.ad(1,3,"form.placeholder."+t))}}function V(t,e){if(1&t&&(u.Kc(0,"input",17),u.Zc(1,"translate")),2&t){const t=u.Yc().$implicit;u.fd("formControlName",t)("id",t)("placeholder",u.ad(1,3,"form.placeholder."+t))}}const _=function(t){return[t]},W=function(t,e){return[t,e]};function H(t,e){if(1&t&&u.Kc(0,"ngx-intl-tel-input",18,19),2&t){const t=u.Yc(2);u.fd("preferredCountries",u.hd(11,_,t.CountryISO.Japan))("enableAutoCountrySelect",!1)("enablePlaceholder",!0)("searchCountryFlag",!0)("searchCountryField",u.id(13,W,t.SearchCountryField.Iso2,t.SearchCountryField.Name))("selectFirstCountry",!1)("selectedCountryISO",t.CountryISO.Japan)("maxLength",15)("tooltipField",t.TooltipLabel.Name)("phoneValidation",!0)("separateDialCode",!1)}}function U(t,e){if(1&t&&(u.Pc(0,"option",22),u.zd(1),u.Zc(2,"changeLanguage"),u.Oc()),2&t){const t=e.$implicit;u.fd("value",t.value),u.wc(1),u.Bd(" ",u.ad(2,2,t.label)," ")}}function Q(t,e){if(1&t&&(u.Pc(0,"select",20),u.xd(1,U,3,4,"option",21),u.Oc()),2&t){const t=u.Yc().$implicit;var n;const e=null==(n=u.Yc().getProfileProperty(t))?null:n.option;u.fd("formControlName",t)("id",t),u.wc(1),u.fd("ngForOf",e)}}function X(t,e){if(1&t&&u.Kc(0,"input",23),2&t){const t=u.Yc().$implicit;u.fd("formControlName",t)("id",t)}}function tt(t,e){if(1&t&&u.Kc(0,"textarea",24),2&t){const t=u.Yc().$implicit;u.fd("formControlName",t)("id",t)}}function et(t,e){if(1&t&&(u.Pc(0,"option",22),u.zd(1),u.Zc(2,"changeLanguage"),u.Oc()),2&t){const t=e.$implicit;u.fd("value",t.value),u.wc(1),u.Bd(" ",u.ad(2,2,t.label)," ")}}function nt(t,e){if(1&t&&(u.Pc(0,"select",24),u.xd(1,et,3,4,"option",21),u.Oc()),2&t){const t=u.Yc().$implicit;var n;const e=null==(n=u.Yc().getAdditionalProperty(t))?null:n.option;u.fd("formControlName",t)("id",t),u.wc(1),u.fd("ngForOf",e)}}function rt(t,e){1&t&&(u.Pc(0,"p",27),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"form.validation.required")," "))}const ot=function(t){return{value:t}};function it(t,e){if(1&t&&(u.Pc(0,"p",27),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t){const t=u.Yc(2).$implicit,e=u.Yc();u.wc(1),u.Bd(" ",u.bd(2,1,"form.validation.maxlength",u.hd(4,ot,null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.maxlength.requiredLength))," ")}}function ct(t,e){if(1&t&&(u.Pc(0,"p",27),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t){const t=u.Yc(2).$implicit,e=u.Yc();u.wc(1),u.Bd(" ",u.bd(2,1,"form.validation.minlength",u.hd(4,ot,null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.minlength.requiredLength))," ")}}function at(t,e){1&t&&(u.Pc(0,"p",27),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"form.validation.email")," "))}function st(t,e){1&t&&(u.Pc(0,"p",27),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"form.validation.telephone")," "))}function lt(t,e){1&t&&(u.Pc(0,"p",27),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"form.validation.fullKana"),""))}function dt(t,e){1&t&&(u.Pc(0,"p",27),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"form.validation.lowercaseLetters"),""))}function pt(t,e){if(1&t&&(u.Pc(0,"div"),u.xd(1,lt,3,3,"p",26),u.xd(2,dt,3,3,"p",26),u.Oc()),2&t){const t=u.Yc(2).$implicit,e=u.Yc();u.wc(1),u.fd("ngIf","ja"===e.language&&(null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.customPattern)),u.wc(1),u.fd("ngIf","ja"!==e.language&&(null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.customPattern))}}function ut(t,e){1&t&&(u.Pc(0,"p",27),u.zd(1),u.Zc(2,"translate"),u.Oc()),2&t&&(u.wc(1),u.Bd(" ",u.ad(2,1,"form.validation.pattern")," "))}function ft(t,e){if(1&t&&(u.Pc(0,"div",25),u.xd(1,rt,3,3,"p",26),u.xd(2,it,3,6,"p",26),u.xd(3,ct,3,6,"p",26),u.xd(4,at,3,3,"p",26),u.xd(5,st,3,3,"p",26),u.xd(6,pt,3,2,"div",5),u.xd(7,ut,3,3,"p",26),u.Oc()),2&t){const t=u.Yc().$implicit,e=u.Yc();u.wc(1),u.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.required),u.wc(1),u.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.maxlength),u.wc(1),u.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.minlength),u.wc(1),u.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.email),u.wc(1),u.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.validatePhoneNumber),u.wc(1),u.fd("ngIf","familyName"===t||"givenName"===t),u.wc(1),u.fd("ngIf",null==e.formGroup.controls[t].errors?null:e.formGroup.controls[t].errors.pattern)}}function mt(t,e){if(1&t&&(u.Pc(0,"div",2),u.Pc(1,"div",3),u.Pc(2,"div",4),u.xd(3,R,3,3,"p",5),u.xd(4,j,3,3,"p",5),u.xd(5,K,3,3,"p",6),u.Oc(),u.Oc(),u.Pc(6,"div",7),u.xd(7,M,2,5,"input",8),u.xd(8,V,2,5,"input",9),u.xd(9,H,2,16,"ngx-intl-tel-input",10),u.xd(10,Q,2,3,"select",11),u.xd(11,X,1,2,"input",12),u.xd(12,tt,1,2,"textarea",13),u.xd(13,nt,2,3,"select",13),u.xd(14,ft,8,7,"div",14),u.Oc(),u.Oc()),2&t){const t=e.$implicit,i=u.Yc();var n=null;const c=i.getAdditionalProperty(t)&&"input"===(null==(n=i.getAdditionalProperty(t))?null:n.inputType);var r=null;const a=i.getAdditionalProperty(t)&&"textarea"===(null==(r=i.getAdditionalProperty(t))?null:r.inputType);var o=null;const s=i.getAdditionalProperty(t)&&"select"===(null==(o=i.getAdditionalProperty(t))?null:o.inputType);u.wc(3),u.fd("ngIf",!i.getAdditionalProperty(t)),u.wc(1),u.fd("ngIf",i.getAdditionalProperty(t)),u.wc(1),u.fd("ngIf",i.isRequired(t)),u.wc(2),u.fd("ngIf","email"!==t&&"telephone"!==t&&"gender"!==t&&!i.getAdditionalProperty(t)),u.wc(1),u.fd("ngIf","email"===t),u.wc(1),u.fd("ngIf","telephone"===t),u.wc(1),u.fd("ngIf","gender"===t),u.wc(1),u.fd("ngIf",c),u.wc(1),u.fd("ngIf",a),u.wc(1),u.fd("ngIf",s),u.wc(1),u.fd("ngIf",i.formGroup.controls[t].invalid&&i.formGroup.controls[t].touched)}}class ht{constructor(t,e){this.translate=t,this.formBuilder=e,this.environment=Object(l.a)(),this.SearchCountryField=y.e,this.TooltipLabel=y.f,this.CountryISO=y.a,this.valueChanges=new u.w}ngOnInit(){this.formGroup=this.createForm(),this.valueChanges.emit(this.formGroup),this.subscription=this.formGroup.valueChanges.subscribe(()=>{this.valueChanges.emit(this.formGroup)}),setTimeout(()=>{if(void 0===this.intlTelInput)return;const t=this.intlTelInput.allCountries.find(t=>t.iso2===y.a.Japan);void 0!==t&&(t.placeHolder=this.translate.instant("form.placeholder.telephone"))},0)}ngOnDestroy(){void 0!==this.subscription&&this.subscription.unsubscribe()}createForm(){const t=this.environment.PROFILE,e=this.formBuilder.group({});if(t.forEach(t=>{const n=[];void 0!==t.required&&t.required&&n.push(v.r.required),void 0!==t.maxLength&&n.push(v.r.maxLength(t.maxLength)),void 0!==t.minLength&&n.push(v.r.minLength(t.minLength)),void 0!==t.pattern&&n.push(v.r.pattern(t.pattern)),"familyName"!==t.key&&"givenName"!==t.key||n.push(e=>{const n=e.root.get(t.key),r=document.documentElement.lang;if(null!==n){if(""===n.value)return null;if("ja"===r&&!new RegExp(/^[\u30a1-\u30f6\u30fc]+$/).test(n.value))return{customPattern:!0};if("ja"!==r&&!new RegExp(/^[a-z]+$/).test(n.value))return{customPattern:!0}}return null}),"email"===t.key&&n.push(v.r.email),e.addControl(t.key,new v.c(t.value,n))}),void 0===this.profile)return e;Object.keys(this.profile).forEach(t=>{const n=this.profile[t];void 0!==n&&void 0!==e.controls[t]&&("telephone"!==t?e.controls[t].setValue(n):e.controls.telephone.setValue((new q).transform(n)))});const n=this.profile.additionalProperty;return void 0!==n&&n.forEach(t=>{const n="additionalProperty."+t.name,r=t.value;void 0!==r&&void 0!==e.controls[n]&&e.controls[n].setValue(r)}),e}isRequired(t){return void 0!==this.environment.PROFILE.find(e=>e.key===t&&e.required)}getProfileFormKeys(){return Object.keys(this.formGroup.controls)}getProfileProperty(t){return this.environment.PROFILE.find(e=>e.key===t)}getAdditionalProperty(t){return this.environment.PROFILE.find(e=>/additionalProperty/.test(e.key)&&e.key===t)}copyDomain(){const t=this.translate.instant("email.domain"),e=document.createElement("textarea");e.value=t,e.selectionStart=0,e.selectionEnd=e.value.length,document.body.appendChild(e),e.focus(),document.execCommand("copy"),e.blur(),document.body.removeChild(e)}}ht.\u0275fac=function(t){return new(t||ht)(u.Jc(f.d),u.Jc(v.b))},ht.\u0275cmp=u.Dc({type:ht,selectors:[["app-input-customer"]],viewQuery:function(t,e){var n;(1&t&&u.Ed(J,!0),2&t)&&(u.nd(n=u.Xc())&&(e.intlTelInput=n.first))},inputs:{profile:"profile",language:"language"},outputs:{valueChanges:"valueChanges"},decls:2,vars:2,consts:[[3,"formGroup"],["class","form-group row align-items-center",4,"ngFor","ngForOf"],[1,"form-group","row","align-items-center"],[1,"col-md-4","py-2","text-md-right"],[1,"d-inline-flex","align-items-center"],[4,"ngIf"],["class","badge badge-danger ml-2",4,"ngIf"],[1,"col-md-8"],["type","text","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["type","email","class","form-control",3,"formControlName","id","placeholder",4,"ngIf"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode",4,"ngIf"],["class","form-control",3,"formControlName","id",4,"ngIf"],["type","text","class","form-control","placeholder","",3,"formControlName","id",4,"ngIf"],["class","form-control","placeholder","",3,"formControlName","id",4,"ngIf"],["class","mt-2",4,"ngIf"],[1,"badge","badge-danger","ml-2"],["type","text",1,"form-control",3,"formControlName","id","placeholder"],["type","email",1,"form-control",3,"formControlName","id","placeholder"],["inputId","telephone","name","telephone","formControlName","telephone",3,"preferredCountries","enableAutoCountrySelect","enablePlaceholder","searchCountryFlag","searchCountryField","selectFirstCountry","selectedCountryISO","maxLength","tooltipField","phoneValidation","separateDialCode"],["intlTelInput",""],[1,"form-control",3,"formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","text","placeholder","",1,"form-control",3,"formControlName","id"],["placeholder","",1,"form-control",3,"formControlName","id"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(t,e){1&t&&(u.Pc(0,"form",0),u.xd(1,mt,15,11,"div",1),u.Oc()),2&t&&(u.fd("formGroup",e.formGroup),u.wc(1),u.fd("ngForOf",e.getProfileFormKeys()))},directives:[v.t,v.l,v.e,r.k,r.l,v.a,v.k,v.d,y.b,y.c,v.q,v.o,v.s],pipes:[f.c,P.a],styles:["input[_ngcontent-%COMP%], ngx-intl-tel-input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{display:block;width:75%}@media (max-width:767.98px){input[_ngcontent-%COMP%], ngx-intl-tel-input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{min-height:5rem}.form-group[_ngcontent-%COMP%]:last-child{margin-bottom:0!important}"]});var gt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function c(t){try{s(r.next(t))}catch(e){i(e)}}function a(t){try{s(r.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,a)}s((r=r.apply(t,e||[])).next())}))};function vt(t,e){if(1&t){const t=u.Qc();u.Pc(0,"app-input-app",17),u.Wc("valueChanges",(function(e){u.rd(t);return u.Yc().appForm=e})),u.Oc()}if(2&t){const t=u.Yc();u.fd("theaters",t.theaters)("data",null==t.inputData?null:t.inputData.app)}}function yt(t,e){if(1&t){const t=u.Qc();u.Pc(0,"app-input-device",18),u.Wc("valueChanges",(function(e){u.rd(t);return u.Yc().deviceForm=e}))("print",(function(){u.rd(t);return u.Yc().print()}))("payment",(function(){u.rd(t);return u.Yc().payment()}))("cashchanger",(function(e){u.rd(t);return u.Yc().cashchanger(e)})),u.Oc()}if(2&t){const t=u.Yc();u.fd("data",null==t.inputData?null:t.inputData.device)}}function Pt(t,e){if(1&t){const t=u.Qc();u.Pc(0,"app-input-customer",19),u.Wc("valueChanges",(function(e){u.rd(t);return u.Yc().profileForm=e})),u.Zc(1,"async"),u.Oc()}if(2&t){const t=u.Yc();var n;const e=null==(n=u.ad(1,2,t.user))?null:n.language;u.fd("profile",t.inputData.profile)("language",e)}}class Ot{constructor(t,e,n,r,o,i,c,a,s){this.epsonEPOSService=t,this.store=e,this.utilService=n,this.actionService=r,this.masterService=o,this.translate=i,this.router=c,this.paymentService=a,this.cinerinoService=s,this.environment=Object(l.a)()}ngOnInit(){return gt(this,void 0,void 0,(function*(){this.user=this.store.pipe(Object(a.m)(p.g)),this.error=this.store.pipe(Object(a.m)(p.a)),this.isLoading=this.store.pipe(Object(a.m)(p.b)),this.posList=[],this.theaters=[];try{this.theaters=yield this.masterService.searchMovieTheaters();const{theater:t,pos:e,applicationType:n,printer:r,cashchanger:o,payment:i,customerContact:c}=yield this.actionService.user.getData();this.inputData={app:{theater:t,pos:e,applicationType:n},device:{printerType:null==r?void 0:r.connectionType,printerIpAddress:null==r?void 0:r.ipAddress,cashchanger:o,payment:i},profile:c}}catch(t){console.error(t),this.router.navigate(["/error"])}}))}ngAfterViewInit(){return gt(this,void 0,void 0,(function*(){try{const t=this.deviceForm.controls.cashchanger.value;""!==t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:t}),yield this.epsonEPOSService.cashchanger.endDeposit({endDepositType:"DEPOSIT_REPAY"}),this.epsonEPOSService.cashchanger.disconnect())}catch(t){console.error(t)}}))}onSubmit(){return gt(this,void 0,void 0,(function*(){if(Object.keys(this.appForm.controls).forEach(t=>{this.appForm.controls[t].markAsTouched()}),Object.keys(this.deviceForm.controls).forEach(t=>{this.deviceForm.controls[t].markAsTouched()}),Object.keys(this.profileForm.controls).forEach(t=>{this.profileForm.controls[t].markAsTouched()}),this.appForm.invalid||this.deviceForm.invalid||this.profileForm.invalid)this.utilService.openAlert({title:this.translate.instant("common.error"),body:this.translate.instant("setting.alert.validation")});else try{const t=this.appForm.controls.theaterBranchCode.value,e=this.appForm.controls.posId.value,n=this.theaters.find(e=>e.branchCode===t);if(void 0===n)throw new Error("theater not found");const r=void 0===n.hasPOS?n.hasPOS:n.hasPOS.find(t=>t.id===e);this.actionService.user.updateAll({pos:r,theater:n,profile:{familyName:void 0===this.profileForm.controls.familyName?void 0:this.profileForm.controls.familyName.value,givenName:void 0===this.profileForm.controls.givenName?void 0:this.profileForm.controls.givenName.value,email:void 0===this.profileForm.controls.email?void 0:this.profileForm.controls.email.value,telephone:void 0===this.profileForm.controls.telephone?void 0:this.profileForm.controls.telephone.value.e164Number,age:void 0===this.profileForm.controls.age?void 0:this.profileForm.controls.age.value,address:void 0===this.profileForm.controls.address?void 0:this.profileForm.controls.address.value,gender:void 0===this.profileForm.controls.gender?void 0:this.profileForm.controls.gender.value},printer:{ipAddress:this.deviceForm.controls.printerIpAddress.value,connectionType:this.deviceForm.controls.printerType.value},cashchanger:void 0===this.deviceForm.controls.cashchanger.value?void 0:this.deviceForm.controls.cashchanger.value,payment:void 0===this.deviceForm.controls.payment.value?void 0:this.deviceForm.controls.payment.value,applicationType:this.appForm.controls.applicationType.value}),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.success")})}catch(t){console.error(t)}}))}print(){return gt(this,void 0,void 0,(function*(){const t={connectionType:this.deviceForm.controls.printerType.value,ipAddress:this.deviceForm.controls.printerIpAddress.value};try{yield this.actionService.order.print({orders:[],printer:t})}catch(e){console.error(e),this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <p class="mb-4">${this.translate.instant("setting.alert.print")}</p>\n                    <div class="p-3 bg-light-gray select-text">\n                    <code>${"{}"===JSON.stringify(e)?e:JSON.stringify(e)}</code>\n                </div>`})}}))}cashchanger(t){return gt(this,void 0,void 0,(function*(){try{const e=this.deviceForm.controls.cashchanger.value;"connect"===t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:e}),yield this.epsonEPOSService.cashchanger.disconnect(),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.connection")})),"endDeposit"===t&&(yield this.epsonEPOSService.cashchanger.init({ipAddress:e}),yield this.epsonEPOSService.cashchanger.endDeposit({endDepositType:"DEPOSIT_REPAY"}),yield this.epsonEPOSService.cashchanger.disconnect())}catch(e){console.error(e);const t=void 0===e.message?e:e.message;this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <div class="p-3 bg-light-gray select-text">\n                    <code>${t}</code>\n                </div>`})}}))}payment(){return gt(this,void 0,void 0,(function*(){try{const t=this.deviceForm.controls.payment.value;yield this.paymentService.init({ipAddress:t});const e=yield this.paymentService.exec({func:s.b.Purchase.Payment.FUNC_CODE.TERMINAL.COMMUNICATION});console.log(e),this.utilService.openAlert({title:this.translate.instant("common.complete"),body:this.translate.instant("setting.alert.connection")})}catch(t){console.error(t);const e=void 0===t.message?t:t.message;this.utilService.openAlert({title:this.translate.instant("common.error"),body:`\n                <div class="p-3 bg-light-gray select-text">\n                    <code>${e}</code>\n                </div>`})}}))}signOut(){return gt(this,void 0,void 0,(function*(){try{yield this.cinerinoService.getServices(),yield this.cinerinoService.signOut()}catch(t){console.error(t)}}))}}Ot.\u0275fac=function(t){return new(t||Ot)(u.Jc(d.c),u.Jc(a.b),u.Jc(d.f),u.Jc(d.a),u.Jc(d.d),u.Jc(f.d),u.Jc(i.b),u.Jc(d.e),u.Jc(d.b))},Ot.\u0275cmp=u.Dc({type:Ot,selectors:[["app-setting"]],decls:36,vars:28,consts:[[3,"title"],[1,"contents"],[1,"container","h-100","px-3","pb-3"],[1,"row","h-100"],[1,"col-2","h-100"],[1,"col-8","h-100","scroll-horizontal"],[1,"text-large","font-weight-bold","bg-light-gray","border-left","border-white-bold","border-primary","p-3","mb-4"],[3,"theaters","data","valueChanges",4,"ngIf"],[3,"data","valueChanges","print","payment","cashchanger",4,"ngIf"],[3,"profile","language","valueChanges",4,"ngIf"],[1,"col-2"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"container","h-100"],[1,"row","align-items-center","justify-content-center","h-100"],[1,"col-3"],["type","button",1,"btn","btn-outline-light","btn-block","font-weight-bold","py-2",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","font-weight-bold","py-2",3,"disabled","click"],[3,"theaters","data","valueChanges"],[3,"data","valueChanges","print","payment","cashchanger"],[3,"profile","language","valueChanges"]],template:function(t,e){1&t&&(u.Kc(0,"app-header"),u.Kc(1,"app-page-title",0),u.Zc(2,"translate"),u.Pc(3,"div",1),u.Pc(4,"div",2),u.Pc(5,"div",3),u.Kc(6,"div",4),u.Pc(7,"div",5),u.Pc(8,"p",6),u.zd(9),u.Zc(10,"translate"),u.Oc(),u.xd(11,vt,1,2,"app-input-app",7),u.Pc(12,"p",6),u.zd(13),u.Zc(14,"translate"),u.Oc(),u.xd(15,yt,1,1,"app-input-device",8),u.Pc(16,"p",6),u.zd(17),u.Zc(18,"translate"),u.Oc(),u.xd(19,Pt,2,4,"app-input-customer",9),u.Oc(),u.Pc(20,"div",10),u.Pc(21,"button",11),u.Wc("click",(function(){return e.signOut()})),u.zd(22),u.Zc(23,"translate"),u.Oc(),u.Oc(),u.Oc(),u.Oc(),u.Oc(),u.Pc(24,"app-footer"),u.Pc(25,"div",12),u.Pc(26,"div",13),u.Pc(27,"div",14),u.Pc(28,"button",15),u.zd(29),u.Zc(30,"translate"),u.Oc(),u.Oc(),u.Pc(31,"div",14),u.Pc(32,"button",16),u.Wc("click",(function(){return e.onSubmit()})),u.Zc(33,"async"),u.zd(34),u.Zc(35,"translate"),u.Oc(),u.Oc(),u.Oc(),u.Oc(),u.Oc()),2&t&&(u.wc(1),u.gd("title",u.ad(2,12,"setting.title")),u.wc(8),u.Bd(" ",u.ad(10,14,"setting.application.title")," "),u.wc(2),u.fd("ngIf",null==e.inputData?null:e.inputData.app),u.wc(2),u.Bd(" ",u.ad(14,16,"setting.device.title")," "),u.wc(2),u.fd("ngIf",null==e.inputData?null:e.inputData.device),u.wc(2),u.Bd(" ",u.ad(18,18,"setting.basic.title")," "),u.wc(2),u.fd("ngIf",e.inputData),u.wc(3),u.Ad(u.ad(23,20,"setting.signOut")),u.wc(6),u.fd("routerLink",e.environment.BASE_URL),u.wc(1),u.Ad(u.ad(30,22,"setting.prev")),u.wc(3),u.fd("disabled",u.ad(33,24,e.isLoading)),u.wc(2),u.Ad(u.ad(35,26,"setting.next")))},directives:[m.a,h.a,r.l,g.a,i.c,T,D,ht],pipes:[f.c,r.b],styles:[""]});const bt=[{path:"",component:c.a,children:[{path:"",component:Ot}]}];class wt{}wt.\u0275mod=u.Hc({type:wt}),wt.\u0275inj=u.Gc({factory:function(t){return new(t||wt)},imports:[[i.d.forChild(bt)],i.d]});class Ct{}Ct.\u0275mod=u.Hc({type:Ct}),Ct.\u0275inj=u.Gc({factory:function(t){return new(t||Ct)},imports:[[r.c,wt,o.a]]})}}]);